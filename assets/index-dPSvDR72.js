import{c as It,r as Dt,a as re,g as Ft}from"./vendor-DLFqrQQS.js";function Rt(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class $t{size=60;gravity=.5;jump_strength=-10;x=150;y=0;velocity_y=0;jump(){this.velocity_y=this.jump_strength}draw(e,t){if(!t)return;e.save(),e.translate(this.x,this.y);const n=Math.atan2(this.velocity_y,20)*.3;e.rotate(n),e.drawImage(t,-this.size/2,-this.size/2,this.size,this.size),e.restore()}update(){this.velocity_y+=this.gravity,this.y+=this.velocity_y}reset(e){this.y=e/2,this.velocity_y=0}getBounds(){const e=this.size/2;return{top:this.y-e,bottom:this.y+e,left:this.x-e,right:this.x+e}}}const z=new $t;function Nt(r,e,t,n,s,i){const a=e.split(" ");let o="",l=n;const c=[];for(const d of a){const f=o+d+" ";r.measureText(f).width>s&&o.length>0?(c.push(o),o=d+" "):o=f}c.push(o),l-=(c.length-1)*i/2;for(let d=0;d<c.length;d++)r.fillText(c[d].trim(),t,l+d*i)}function ie(r,e){return Math.random()*(e-r)+r}function Ae(r,e){return Math.floor(Math.random()*(e-r+1))+r}class Mt{x;y;width;height;isWall=!0;constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s}draw(e,t){const n="#FF4500";e.fillStyle=n,e.fillRect(this.x,this.y,this.width,this.height),e.strokeStyle="#CC3300",e.lineWidth=2,e.strokeRect(this.x,this.y,this.width,this.height),t&&e.drawImage(t,this.x,this.y,this.width,this.height)}update(e){this.x-=e}getBounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}reset(e,t,n,s){this.x=e,this.y=t,Object.assign(this,{width:n,height:s})}}class _t{x;y;width;height;isCorrect;answerText;type="tunnel";constructor(e,t,n,s,i,a){this.x=e,this.y=t,this.width=n,this.height=s,this.isCorrect=i,this.answerText=a}draw(e){const t=this.isCorrect?"#00FF00":"#FFFFFF";e.fillStyle=t,e.font='14px "Press Start 2P"',e.textAlign="center";const n=this.width-10,s=18,i=this.x+this.width/2,a=this.y+this.height/2;Nt(e,this.answerText,i,a,n,s),e.textAlign="left"}update(e){this.x-=e}getBounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}reset(e,t,n,s,i,a){this.x=e,this.y=t,Object.assign(this,{width:n,height:s,isCorrect:i,answerText:a})}}class jt{obstaclePool=[];tunnelPool=[];activeObstacles=[];activeTunnels=[];maxPoolSize=50;createObstacle(e,t,n,s){let i;return this.obstaclePool.length>0?(i=this.obstaclePool.pop(),i.reset(e,t,n,s)):i=new Mt(e,t,n,s),this.activeObstacles.push(i),i}createTunnel(e,t,n,s,i,a){let o;return this.tunnelPool.length>0?(o=this.tunnelPool.pop(),o.reset(e,t,n,s,i,a)):o=new _t(e,t,n,s,i,a),this.activeTunnels.push(o),o}update(e){for(let t=this.activeObstacles.length-1;t>=0;t--){const n=this.activeObstacles[t];n.update(e),n.x+n.width<0&&(this.activeObstacles.splice(t,1),this.obstaclePool.length<this.maxPoolSize&&this.obstaclePool.push(n))}for(let t=this.activeTunnels.length-1;t>=0;t--){const n=this.activeTunnels[t];n.update(e),n.x+n.width<0&&(this.activeTunnels.splice(t,1),this.tunnelPool.length<this.maxPoolSize&&this.tunnelPool.push(n))}}draw(e,t){for(const n of this.activeObstacles)n.draw(e,t);for(const n of this.activeTunnels)n.draw(e)}clear(){for(const e of this.activeObstacles)this.obstaclePool.length<this.maxPoolSize&&this.obstaclePool.push(e);for(const e of this.activeTunnels)this.tunnelPool.length<this.maxPoolSize&&this.tunnelPool.push(e);this.activeObstacles.length=0,this.activeTunnels.length=0}getActiveObstacles(){return this.activeObstacles}getActiveTunnels(){return this.activeTunnels}getStats(){return{activeObstacles:this.activeObstacles.length,activeTunnels:this.activeTunnels.length,pooledObstacles:this.obstaclePool.length,pooledTunnels:this.tunnelPool.length}}}const M=new jt;class Ut{defaultWallWidth=100;defaultTunnelCount=4;minTunnelHeight=120;generateWallWithTunnels(e,t,n=60){const s=this.defaultWallWidth,i=Math.min(this.defaultTunnelCount,t.answers.length),a=Math.max(this.minTunnelHeight,n*2),o=i*a,l=e.height-o;if(l<0){console.error("Not enough space for tunnels. Reduce tunnel height or number of tunnels.");return}const c=l/(i+1);let d=0;for(let f=0;f<i+1;f++)if(M.createObstacle(e.width,d,s,c),f<i&&f<t.answers.length){const u=d+c,p=f===t.correctAnswer,v=t.answers[f]||"";M.createTunnel(e.width,u,s,a,p,v),d+=c+a}}generateMovingWall(e,t,n=60){this.generateWallWithTunnels(e,t,n);const s=M.getActiveTunnels(),i=30,a=.02;s.forEach((o,l)=>{const c=Math.sin(Date.now()*a+l)*i;o.y+=c})}}class zt{checkCollisions(e,t){const n=e.size/2;if(e.y-n<=0)return"ceiling";if(e.y+n>=t.height)return"floor";const s=M.getActiveObstacles(),i=M.getActiveTunnels();if(s.length===0)return null;const a=s[0].x,o=s[0].width,l=e.x+n,c=e.x-n;if(l<a||c>a+o)return null;for(const d of s)if(this.isRectColliding(e,d))return"wall";for(const d of i)if(this.isCharacterInTunnel(e,d))return d.isCorrect?"correct":"incorrect";return"wall"}isRectColliding(e,t){const n=e.size/2;return e.x+n>t.x&&e.x-n<t.x+t.width&&e.y+n>t.y&&e.y-n<t.y+t.height}isCharacterInTunnel(e,t){return e.y>=t.y&&e.y<=t.y+t.height}}const Bt=new Ut,Ht=new zt,Me=[],_e=[];function qt(r,e){M.clear(),Bt.generateWallWithTunnels(r,e)}function Gt(r,e){return Ht.checkCollisions(r,e)}function Vt(r){M.update(r),Me.length=0,_e.length=0,Me.push(...M.getActiveObstacles()),_e.push(...M.getActiveTunnels())}function Kt(r,e){M.draw(r,e)}function je(){M.clear()}class Jt{text="";correctAnswer=null;answers=[];display=!1;update(e){e.text!==void 0&&(this.text=e.text),e.correctAnswer!==void 0&&(this.correctAnswer=e.correctAnswer),e.answers!==void 0&&(this.answers=[...e.answers]),e.display!==void 0&&(this.display=e.display)}reset(){this.text="",this.correctAnswer=null,this.answers=[],this.display=!1}}const ae=new Jt;class Wt{baseUrl="https://opentdb.com";cache=new Map;cacheTimeout=300*1e3;decodeHtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}shuffleArray(e){const t=[...e];for(let n=t.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[t[n],t[s]]=[t[s],t[n]]}return t}transformQuestion(e){const t=e.incorrect_answers.map(a=>this.decodeHtml(a)),n=this.decodeHtml(e.correct_answer),s=this.shuffleArray([...t,n]),i=s.indexOf(n);return{question:this.decodeHtml(e.question),answers:s,correct_answer:i}}async fetchWithCache(e,t){const n=this.cache.get(t);if(n&&Date.now()-n.timestamp<this.cacheTimeout)return n.data;try{const s=await fetch(e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const i=await s.json();return this.cache.set(t,{data:i,timestamp:Date.now()}),i}catch(s){throw console.error(`Failed to fetch from ${e}:`,s),new Error(`Failed to fetch data: ${s instanceof Error?s.message:"Unknown error"}`)}}async loadCategories(){try{return(await this.fetchWithCache(`${this.baseUrl}/api_category.php`,"categories")).trivia_categories}catch(e){return console.error("Error loading categories:",e),[{id:9,name:"General Knowledge"},{id:17,name:"Science & Nature"},{id:21,name:"Sports"}]}}async fetchQuestion(e,t){try{const n=t?`&difficulty=${t}`:"",s=`${this.baseUrl}/api.php?amount=1&category=${e}&type=multiple${n}`,i=await this.fetchWithCache(s,`question_${e}_${t||"any"}`);if(i.response_code!==0)throw new Error(`API returned response code: ${i.response_code}`);if(i.results.length===0)throw new Error("No questions returned from API");const a=this.transformQuestion(i.results[0]),o={text:a.question,correctAnswer:a.correct_answer,answers:a.answers,display:!0};return ae.update(o),o}catch(n){console.error("Error fetching question:",n);const s={text:"Error loading question. Please try again.",correctAnswer:null,answers:["Try Again","Refresh Page","Check Connection","Continue"],display:!0};return ae.update(s),s}}async fetchMultipleQuestions(e,t=5,n){try{const s=n?`&difficulty=${n}`:"",i=`${this.baseUrl}/api.php?amount=${t}&category=${e}&type=multiple${s}`,a=await this.fetchWithCache(i,`questions_${e}_${t}_${n||"any"}`);if(a.response_code!==0)throw new Error(`API returned response code: ${a.response_code}`);return a.results.map(o=>{const l=this.transformQuestion(o);return{text:l.question,correctAnswer:l.correct_answer,answers:l.answers,display:!1}})}catch(s){return console.error("Error fetching multiple questions:",s),[]}}validateAnswer(e,t){return t.correctAnswer===null?!1:e===t.correctAnswer}getStats(){let e=0,t=0;for(const[n]of this.cache.entries())n==="categories"&&e++,n.startsWith("question_")&&t++;return{cacheSize:this.cache.size,categories:e,questions:t}}clearCache(){this.cache.clear()}async preloadQuestions(e,t=10){try{await this.fetchMultipleQuestions(e,t)}catch(n){console.warn("Failed to preload questions:",n)}}}const Xt=new Wt,Qt={},Yt=r=>(e,t,n)=>{const s=n.subscribe;return n.subscribe=(a,o,l)=>{let c=a;if(o){const d=l?.equalityFn||Object.is;let f=a(n.getState());c=u=>{const p=a(u);if(!d(f,p)){const v=f;o(f=p,v)}},l?.fireImmediately&&o(f,f)}return s(c)},r(e,t,n)},Zt=Yt;function yt(r,e){let t;try{t=r()}catch{return}return{getItem:s=>{var i;const a=l=>l===null?null:JSON.parse(l,void 0),o=(i=t.getItem(s))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,i)=>t.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>t.removeItem(s)}}const le=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return le(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return le(n)(t)}}}},en=(r,e)=>(t,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,k)=>({...k,...y}),...e},a=!1;const o=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return r((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...y)},n,s);const d=le(i.serialize),f=()=>{const y=i.partialize({...n()});let k;const b=d({state:y,version:i.version}).then(A=>c.setItem(i.name,A)).catch(A=>{k=A});if(k)throw k;return b},u=s.setState;s.setState=(y,k)=>{u(y,k),f()};const p=r((...y)=>{t(...y),f()},n,s);let v;const m=()=>{var y;if(!c)return;a=!1,o.forEach(b=>b(n()));const k=((y=i.onRehydrateStorage)==null?void 0:y.call(i,n()))||void 0;return le(c.getItem.bind(c))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var A;return v=i.merge(b,(A=n())!=null?A:p),t(v,!0),f()}).then(()=>{k?.(v,void 0),a=!0,l.forEach(b=>b(v))}).catch(b=>{k?.(void 0,b)})};return s.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(c=y.getStorage())},clearStorage:()=>{c?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},m(),v||p},tn=(r,e)=>(t,n,s)=>{let i={storage:yt(()=>localStorage),partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...e},a=!1;const o=new Set,l=new Set;let c=i.storage;if(!c)return r((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...m)},n,s);const d=()=>{const m=i.partialize({...n()});return c.setItem(i.name,{state:m,version:i.version})},f=s.setState;s.setState=(m,y)=>{f(m,y),d()};const u=r((...m)=>{t(...m),d()},n,s);s.getInitialState=()=>u;let p;const v=()=>{var m,y;if(!c)return;a=!1,o.forEach(b=>{var A;return b((A=n())!=null?A:u)});const k=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(m=n())!=null?m:u))||void 0;return le(c.getItem.bind(c))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var A;const[O,T]=b;if(p=i.merge(T,(A=n())!=null?A:u),t(p,!0),O)return d()}).then(()=>{k?.(p,void 0),p=n(),a=!0,l.forEach(b=>b(p))}).catch(b=>{k?.(void 0,b)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},i.skipHydration||v(),p||u},nn=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Qt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),en(r,e)):tn(r,e),sn=nn,rn={volume:.7,sfxVolume:.8,musicVolume:.6,difficulty:"medium",theme:"auto",highContrast:!1,reducedMotion:!1,autoSave:!0},Ue={totalGamesPlayed:0,totalScore:0,bestScore:0,totalQuestionsAnswered:0,correctAnswers:0,averageScore:0,playTime:0,categoriesPlayed:[],lastPlayed:0},ce=It()(Zt(sn((r,e)=>({gameState:"menu",score:{value:0},hasShield:!1,gameSpeed:4,selectedCategoryId:null,lives:3,level:1,experience:0,achievements:[],settings:rn,statistics:Ue,setGameState:t=>{if(r({gameState:t}),t==="playing"){const n=e().statistics;r({statistics:{...n,totalGamesPlayed:n.totalGamesPlayed+1,lastPlayed:Date.now()}})}},incrementScore:()=>{const n=e().score.value+1;r({score:{value:n},experience:e().experience+10});const s=e().statistics;r({statistics:{...s,totalScore:s.totalScore+1,bestScore:Math.max(s.bestScore,n),correctAnswers:s.correctAnswers+1,averageScore:(s.totalScore+1)/Math.max(s.totalQuestionsAnswered,1)}});const i=e().experience,a=Math.floor(i/100)+1;a>e().level&&(r({level:a}),e().unlockAchievement(`level_${a}`))},resetScore:()=>{r({score:{value:0}})},setShield:t=>{r({hasShield:t})},setGameSpeed:t=>{r({gameSpeed:t})},setSelectedCategory:t=>{r({selectedCategoryId:t});const n=e().statistics,s=n.categoriesPlayed.includes(t)?n.categoriesPlayed:[...n.categoriesPlayed,t];r({statistics:{...n,categoriesPlayed:s}})},resetGame:()=>{r({gameState:"menu",score:{value:0},hasShield:!1,gameSpeed:4,lives:3})},setLives:t=>{r({lives:Math.max(0,t)})},decrementLives:()=>{const t=Math.max(0,e().lives-1);r({lives:t}),t===0&&e().setGameState("gameOver")},setLevel:t=>{r({level:Math.max(1,t)})},incrementLevel:()=>{const t=e().level+1;r({level:t}),e().unlockAchievement(`level_${t}`)},addExperience:t=>{const n=e().experience+t;r({experience:n});const s=Math.floor(n/100)+1;s>e().level&&e().setLevel(s)},unlockAchievement:t=>{const n=e().achievements;n.includes(t)||r({achievements:[...n,t]})},updateSettings:t=>{r({settings:{...e().settings,...t}})},updateStatistics:t=>{r({statistics:{...e().statistics,...t}})},resetStatistics:()=>{r({statistics:Ue})}}),{name:"sprintsolve-game-storage",storage:yt(()=>localStorage),partialize:r=>({settings:r.settings,statistics:r.statistics,achievements:r.achievements,level:r.level,experience:r.experience})}))),an=()=>ce(r=>({setGameState:r.setGameState,incrementScore:r.incrementScore,resetScore:r.resetScore,setShield:r.setShield,setGameSpeed:r.setGameSpeed,setSelectedCategory:r.setSelectedCategory,resetGame:r.resetGame,setLives:r.setLives,decrementLives:r.decrementLives,addExperience:r.addExperience,unlockAchievement:r.unlockAchievement,updateSettings:r.updateSettings,updateStatistics:r.updateStatistics}));ce.subscribe(r=>r.statistics,(r,e)=>{r.totalGamesPlayed>e.totalGamesPlayed&&console.debug("Game started:",r.totalGamesPlayed),r.bestScore>e.bestScore&&console.debug("New high score:",r.bestScore)});ce.subscribe(r=>r.achievements,(r,e)=>{const t=r.filter(n=>!e.includes(n));for(const n of t)console.debug("Achievement unlocked:",n)});var W=Dt();const ee={jump:{src:["https://freesound.org/data/previews/135/135936_2434988-lq.mp3"],volume:.7,preload:!0},score:{src:["https://freesound.org/data/previews/270/270319_5123851-lq.mp3"],volume:.8,preload:!0},gameOver:{src:["https://freesound.org/data/previews/219/219244_4082829-lq.mp3"],volume:.9,preload:!0},background:{src:["https://freesound.org/data/previews/396/396740_5218259-lq.mp3"],volume:.4,loop:!0,preload:!0},powerup:{src:["https://freesound.org/data/previews/341/341695_5123451-lq.mp3"],volume:.6,preload:!1},shield:{src:["https://freesound.org/data/previews/233/233704_4086654-lq.mp3"],volume:.7,preload:!1},explosion:{src:["https://freesound.org/data/previews/245/245372_4486188-lq.mp3"],volume:.8,preload:!1}};class on{sounds=new Map;loadingPromises=new Map;masterVolume=1;sfxVolume=1;musicVolume=1;muted=!1;initialized=!1;constructor(){this.init()}async init(){try{W.Howler.volume(this.masterVolume),W.Howler.html5PoolSize(10),await this.preloadEssentialSounds(),this.initialized=!0,console.debug("Audio system initialized")}catch(e){console.warn("Failed to initialize audio system:",e)}}async preloadEssentialSounds(){const e=Object.entries(ee).filter(([,t])=>t.preload).map(([t])=>this.loadSound(t));await Promise.allSettled(e)}async loadSound(e){if(this.loadingPromises.has(e))return this.loadingPromises.get(e);if(this.sounds.has(e))return Promise.resolve();const t=ee[e],n=new Promise(s=>{const i=new W.Howl({...t,onload:()=>{this.sounds.set(e,i),this.loadingPromises.delete(e),s()},onloaderror:()=>{console.warn(`Failed to load audio: ${e}`),this.loadingPromises.delete(e),s()},onplayerror:()=>{console.warn(`Failed to play audio: ${e}`)}})});return this.loadingPromises.set(e,n),n}async playSound(e,t,n){if(!this.muted)try{await this.loadSound(e);const s=this.sounds.get(e);if(!s)return;const i=ee[e],o=e==="background"?this.musicVolume:this.sfxVolume,l=(t??i.volume)*o*this.masterVolume;s.volume(Math.max(0,Math.min(1,l))),n?.rate&&s.rate(n.rate),n?.loop!==void 0&&s.loop(n.loop),s.play()}catch(s){console.warn(`Failed to play sound: ${e}`,s)}}stopSound(e){const t=this.sounds.get(e);t&&t.stop()}async playJump(){await this.playSound("jump")}async playScore(){await this.playSound("score")}async playGameOver(){await this.playSound("gameOver")}async playBackgroundMusic(){await this.playSound("background")}stopBackgroundMusic(){this.stopSound("background")}async playPowerup(){await this.playSound("powerup")}async playShield(){await this.playSound("shield")}async playExplosion(){await this.playSound("explosion")}setVolume(e){this.masterVolume=Math.max(0,Math.min(1,e)),W.Howler.volume(this.masterVolume)}setSfxVolume(e){this.sfxVolume=Math.max(0,Math.min(1,e))}setMusicVolume(e){this.musicVolume=Math.max(0,Math.min(1,e));const t=this.sounds.get("background");if(t){const n=ee.background;t.volume(n.volume*this.musicVolume*this.masterVolume)}}mute(){this.muted=!0,W.Howler.mute(!0)}unmute(){this.muted=!1,W.Howler.mute(!1)}toggleMute(){return this.muted?this.unmute():this.mute(),this.muted}pauseAll(){for(const e of this.sounds.values())e.pause()}resumeAll(){for(const e of this.sounds.values())e.playing()&&e.play()}stopAll(){for(const e of this.sounds.values())e.stop()}getStats(){return{initialized:this.initialized,soundsLoaded:this.sounds.size,soundsLoading:this.loadingPromises.size,masterVolume:this.masterVolume,sfxVolume:this.sfxVolume,musicVolume:this.musicVolume,muted:this.muted}}async preloadAll(){const e=Object.keys(ee);await Promise.allSettled(e.map(t=>this.loadSound(t)))}clearCache(){this.stopAll();for(const e of this.sounds.values())e.unload();this.sounds.clear(),this.loadingPromises.clear()}}const V=new on;function ln(){V.playJump().catch(console.warn)}function cn(){V.playScore().catch(console.warn)}function un(){V.playGameOver().catch(console.warn)}function hn(){V.playBackgroundMusic().catch(console.warn)}function ze(){V.stopBackgroundMusic()}class dn{x;y;size;speedX;speedY;color;ttl;constructor(e,t){this.x=e,this.y=t,this.size=ie(2,7),this.speedX=ie(-6,6),this.speedY=ie(-6,6),this.color=`hsl(${Ae(0,60)}, 100%, 50%)`,this.ttl=Ae(50,150)}update(){this.x+=this.speedX,this.y+=this.speedY,this.ttl--}draw(e){const t=Math.max(0,this.ttl/150);e.save(),e.globalAlpha=t,e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill(),e.restore()}reset(e,t){this.x=e,this.y=t,this.ttl=Ae(50,150)}get isAlive(){return this.ttl>0}}class fn{pool=[];activeParticles=[];maxPoolSize=200;create(e,t){let n;this.pool.length>0?(n=this.pool.pop(),n.reset(e,t)):n=new dn(e,t),this.activeParticles.push(n)}update(){for(let e=this.activeParticles.length-1;e>=0;e--){const t=this.activeParticles[e];t.update(),t.isAlive||(this.activeParticles.splice(e,1),this.pool.length<this.maxPoolSize&&this.pool.push(t))}}draw(e){for(const t of this.activeParticles)t.draw(e)}clear(){for(const e of this.activeParticles)this.pool.length<this.maxPoolSize&&this.pool.push(e);this.activeParticles.length=0}get count(){return this.activeParticles.length}getStats(){return{active:this.activeParticles.length,pooled:this.pool.length}}}const Le=new fn;function gn(r,e,t=50){for(let n=0;n<t;n++){const s=ie(-10,10),i=ie(-10,10);Le.create(r+s,e+i)}}function Be(){Le.update()}function pn(r){Le.draw(r)}function He(){Le.clear()}function Ee(r){return new Promise((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>{console.error(`Failed to load image: ${r}`,s),t(new Error(`Failed to load image: ${r}`))},n.src=r})}const Te={background:"./background.png",character:"./character.gif",obstacle:"./obstacle.png"};async function mn(){try{const[r,e,t]=await Promise.all([Ee(Te.background),Ee(Te.character),Ee(Te.obstacle)]);return{background:r,character:e,obstacle:t}}catch(r){throw console.error("Failed to load game assets:",r),new Error("Failed to load game assets. Please refresh and try again.")}}let pe;const yn=new Uint8Array(16);function vn(){if(!pe&&(pe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(yn)}const D=[];for(let r=0;r<256;++r)D.push((r+256).toString(16).slice(1));function bn(r,e=0){return D[r[e+0]]+D[r[e+1]]+D[r[e+2]]+D[r[e+3]]+"-"+D[r[e+4]]+D[r[e+5]]+"-"+D[r[e+6]]+D[r[e+7]]+"-"+D[r[e+8]]+D[r[e+9]]+"-"+D[r[e+10]]+D[r[e+11]]+D[r[e+12]]+D[r[e+13]]+D[r[e+14]]+D[r[e+15]]}const wn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qe={randomUUID:wn};function Ge(r,e,t){if(qe.randomUUID&&!r)return qe.randomUUID();r=r||{};const n=r.random||(r.rng||vn)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,bn(n)}var Sn={};class xn{config;sessionData;eventQueue=[];isInitialized=!1;performanceObserver;constructor(){this.config=this.loadConfig(),this.sessionData=this.initializeSession(),this.setupPerformanceMonitoring()}async initialize(e={}){if(this.config={...this.config,...e},!this.config.userConsent){console.log("Analytics: User consent not granted");return}try{this.config.gtag&&typeof window<"u"&&await this.loadGoogleAnalytics(),this.startSession(),this.processEventQueue(),this.isInitialized=!0,console.log("Analytics: Initialized successfully")}catch(t){console.error("Analytics: Initialization failed",t)}}trackGameplayEvent(e){const t={...e,timestamp:Date.now(),sessionId:this.sessionData.sessionId,userId:this.sessionData.userId};this.updateSessionData(e),this.sendEvent("gameplay_event",t),this.config.debugMode&&console.log("Analytics: Gameplay event tracked",t)}trackUserInteraction(e){const t={...e,timestamp:Date.now(),sessionId:this.sessionData.sessionId};this.sendEvent("user_interaction",t),this.config.debugMode&&console.log("Analytics: User interaction tracked",t)}trackPerformance(e){const t={...e,timestamp:Date.now(),sessionId:this.sessionData.sessionId};this.sendEvent("performance_metric",t),this.config.debugMode&&console.log("Analytics: Performance metric tracked",t)}trackCustomEvent(e,t={}){const n={event:e,...t,timestamp:Date.now(),sessionId:this.sessionData.sessionId};this.sendEvent("custom_event",n)}setUserProperties(e){typeof gtag<"u"&&gtag("config",this.config.gtag,{user_properties:e})}trackPageView(e,t){typeof gtag<"u"&&gtag("config",this.config.gtag,{page_title:t||e,page_location:window.location.href})}getSessionData(){return{...this.sessionData}}getEngagementMetrics(){const e=Date.now()-this.sessionData.startTime,t=parseInt(localStorage.getItem("analytics_total_sessions")||"1"),s=(parseInt(localStorage.getItem("analytics_total_session_time")||"0")+e)/t,a=parseInt(localStorage.getItem("analytics_short_sessions")||"0")/t*100;return{sessionDuration:e,averageSessionDuration:s,totalSessions:t,bounceRate:a}}exportAnalyticsData(){const e={sessionData:this.sessionData,config:this.config,engagementMetrics:this.getEngagementMetrics(),timestamp:Date.now()};return JSON.stringify(e,null,2)}clearAnalyticsData(){Object.keys(localStorage).filter(t=>t.startsWith("analytics_")).forEach(t=>localStorage.removeItem(t)),this.sessionData=this.initializeSession(),this.eventQueue=[],console.log("Analytics: All data cleared")}updateConsent(e){this.config.userConsent=e,localStorage.setItem("analytics_consent",e.toString()),e&&!this.isInitialized?this.initialize():e||this.clearAnalyticsData()}loadConfig(){return{gtag:Sn.VITE_GTAG_ID,debugMode:!1,userConsent:localStorage.getItem("analytics_consent")==="true",sessionTimeout:1800*1e3}}initializeSession(){const e=localStorage.getItem("analytics_session");if(e){const n=JSON.parse(e);if(Date.now()-n.lastActivity<(this.config.sessionTimeout||1800*1e3))return n.lastActivity=Date.now(),n}const t={sessionId:Ge(),userId:localStorage.getItem("analytics_user_id")||Ge(),startTime:Date.now(),lastActivity:Date.now(),totalPlayTime:0,gamesPlayed:0,totalScore:0,averageScore:0,difficultiesPlayed:[],categoriesPlayed:[],achievementsUnlocked:[]};return localStorage.setItem("analytics_user_id",t.userId),t}startSession(){this.trackCustomEvent("session_start",{user_id:this.sessionData.userId,session_id:this.sessionData.sessionId}),setInterval(()=>{this.updateSession()},3e4),window.addEventListener("beforeunload",()=>{this.endSession()})}updateSession(){this.sessionData.lastActivity=Date.now(),this.saveSession()}endSession(){const e=Date.now()-this.sessionData.startTime,t=parseInt(localStorage.getItem("analytics_total_sessions")||"0")+1,n=parseInt(localStorage.getItem("analytics_total_session_time")||"0")+e;if(localStorage.setItem("analytics_total_sessions",t.toString()),localStorage.setItem("analytics_total_session_time",n.toString()),e<3e4){const s=parseInt(localStorage.getItem("analytics_short_sessions")||"0")+1;localStorage.setItem("analytics_short_sessions",s.toString())}this.trackCustomEvent("session_end",{session_duration:e,games_played:this.sessionData.gamesPlayed,total_score:this.sessionData.totalScore})}saveSession(){localStorage.setItem("analytics_session",JSON.stringify(this.sessionData))}updateSessionData(e){switch(e.event){case"game_start":this.sessionData.gamesPlayed++,e.category&&!this.sessionData.categoriesPlayed.includes(e.category)&&this.sessionData.categoriesPlayed.push(e.category),e.difficulty&&!this.sessionData.difficultiesPlayed.includes(e.difficulty)&&this.sessionData.difficultiesPlayed.push(e.difficulty);break;case"game_end":e.score&&(this.sessionData.totalScore+=e.score,this.sessionData.averageScore=this.sessionData.totalScore/this.sessionData.gamesPlayed),e.duration&&(this.sessionData.totalPlayTime+=e.duration);break;case"achievement_unlocked":e.category&&!this.sessionData.achievementsUnlocked.includes(e.category)&&this.sessionData.achievementsUnlocked.push(e.category);break}this.saveSession()}async loadGoogleAnalytics(){return new Promise((e,t)=>{if(typeof gtag<"u"){e();return}try{const n=document.createElement("script");n.async=!0,n.src=`https://www.googletagmanager.com/gtag/js?id=${this.config.gtag}`,document.head.appendChild(n),n.onload=()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",this.config.gtag,{cookie_flags:"SameSite=None;Secure",anonymize_ip:!0}),e()},n.onerror=t}catch(n){t(n)}})}sendEvent(e,t){if(!this.isInitialized){this.eventQueue.push({eventType:e,eventData:t});return}typeof gtag<"u"&&gtag("event",e,t),this.storeEventLocally(e,t)}processEventQueue(){for(;this.eventQueue.length>0;){const{eventType:e,eventData:t}=this.eventQueue.shift();this.sendEvent(e,t)}}storeEventLocally(e,t){const n=JSON.parse(localStorage.getItem("analytics_events")||"[]");n.push({eventType:e,eventData:t,timestamp:Date.now()}),n.length>1e3&&n.splice(0,n.length-1e3),localStorage.setItem("analytics_events",JSON.stringify(n))}setupPerformanceMonitoring(){"PerformanceObserver"in window&&(this.performanceObserver=new PerformanceObserver(s=>{s.getEntries().forEach(a=>{if(a.entryType==="navigation"){const o=a;this.trackPerformance({event:"performance_metric",metric:"load_time",value:o.loadEventEnd-o.loadEventStart,context:"navigation"})}})}),this.performanceObserver.observe({entryTypes:["navigation","resource"]}));let e=performance.now(),t=0;const n=()=>{t++;const s=performance.now();if(s>=e+1e3){const i=Math.round(t*1e3/(s-e));this.trackPerformance({event:"performance_metric",metric:"fps",value:i,context:"gameplay"}),t=0,e=s}requestAnimationFrame(n)};requestAnimationFrame(n)}}const N=new xn,w=r=>typeof r=="string",te=()=>{let r,e;const t=new Promise((n,s)=>{r=n,e=s});return t.resolve=r,t.reject=e,t},Ve=r=>r==null?"":""+r,Pn=(r,e,t)=>{r.forEach(n=>{e[n]&&(t[n]=e[n])})},kn=/###/g,Ke=r=>r&&r.indexOf("###")>-1?r.replace(kn,"."):r,Je=r=>!r||w(r),oe=(r,e,t)=>{const n=w(e)?e.split("."):e;let s=0;for(;s<n.length-1;){if(Je(r))return{};const i=Ke(n[s]);!r[i]&&t&&(r[i]=new t),Object.prototype.hasOwnProperty.call(r,i)?r=r[i]:r={},++s}return Je(r)?{}:{obj:r,k:Ke(n[s])}},We=(r,e,t)=>{const{obj:n,k:s}=oe(r,e,Object);if(n!==void 0||e.length===1){n[s]=t;return}let i=e[e.length-1],a=e.slice(0,e.length-1),o=oe(r,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=oe(r,a,Object),o&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=t},Ln=(r,e,t,n)=>{const{obj:s,k:i}=oe(r,e,Object);s[i]=s[i]||[],s[i].push(t)},be=(r,e)=>{const{obj:t,k:n}=oe(r,e);if(t)return t[n]},On=(r,e,t)=>{const n=be(r,t);return n!==void 0?n:be(e,t)},vt=(r,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?w(r[n])||r[n]instanceof String||w(e[n])||e[n]instanceof String?t&&(r[n]=e[n]):vt(r[n],e[n],t):r[n]=e[n]);return r},X=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const An=r=>w(r)?r.replace(/[&<>"'\/]/g,e=>Cn[e]):r;class En{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Tn=[" ",",","?","!",";"],In=new En(20),Dn=(r,e,t)=>{e=e||"",t=t||"";const n=Tn.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(n.length===0)return!0;const s=In.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!s.test(r);if(!i){const a=r.indexOf(t);a>0&&!s.test(r.substring(0,a))&&(i=!0)}return i},Re=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[e])return r[e];const n=e.split(t);let s=r;for(let i=0;i<n.length;){if(!s||typeof s!="object")return;let a,o="";for(let l=i;l<n.length;++l)if(l!==i&&(o+=t),o+=n[l],a=s[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;i+=l-i+1;break}s=a}return s},we=r=>r&&r.replace("_","-"),Fn={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console&&console[r]&&console[r].apply(console,e)}};class Se{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Fn,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,s){return s&&!this.debug?null:(w(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Se(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Se(this.logger,e)}}var j=new Se;class Oe{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(t)||0;this.observers[n].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[o,l]=a;for(let c=0;c<l;c++)o.apply(o,[e,...n])})}}class Xe extends Oe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):w(n)&&i?o.push(...n.split(i)):o.push(n)));const l=be(this.data,o);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),l||!a||!w(n)?l:Re(this.data&&this.data[e]&&this.data[e][t],n,i)}addResource(e,t,n,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),We(this.data,o,s),i.silent||this.emit("added",e,t,n,s)}addResources(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(w(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});s.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,s,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=n,n=t,t=o[1]),this.addNamespaces(t);let l=be(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?vt(l,n,i):l={...l,...n},We(this.data,o,l),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var bt={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,n,s){return r.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,t,n,s))}),e}};const Qe={};class xe extends Oe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Pn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=j.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return n&&n.res!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Dn(e,n,s);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:w(i)?[i]:i};const c=e.split(n);(n!==s||n===s&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),e=c.join(s)}return{key:e,namespaces:w(i)?[i]:i}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],t),l=o[o.length-1],c=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){const O=t.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${O}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${O}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const f=this.resolve(e,t);let u=f&&f.res;const p=f&&f.usedKey||a,v=f&&f.exactUsedKey||a,m=Object.prototype.toString.apply(u),y=["[object Number]","[object Function]","[object RegExp]"],k=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,A=!w(u)&&typeof u!="boolean"&&typeof u!="number";if(b&&u&&A&&y.indexOf(m)<0&&!(w(k)&&Array.isArray(u))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,u,{...t,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(f.res=O,f.usedParams=this.getUsedParamsDetails(t),f):O}if(i){const O=Array.isArray(u),T=O?[]:{},F=O?v:p;for(const I in u)if(Object.prototype.hasOwnProperty.call(u,I)){const J=`${F}${i}${I}`;T[I]=this.translate(J,{...t,joinArrays:!1,ns:o}),T[I]===J&&(T[I]=u[I])}u=T}}else if(b&&w(k)&&Array.isArray(u))u=u.join(k),u&&(u=this.extendTranslation(u,e,t,n));else{let O=!1,T=!1;const F=t.count!==void 0&&!w(t.count),I=xe.hasDefaultValue(t),J=F?this.pluralResolver.getSuffix(c,t.count,t):"",_=t.ordinal&&F?this.pluralResolver.getSuffix(c,t.count,{ordinal:!1}):"",fe=F&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),q=fe&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${J}`]||t[`defaultValue${_}`]||t.defaultValue;!this.isValidLookup(u)&&I&&(O=!0,u=q),this.isValidLookup(u)||(T=!0,u=a);const Ce=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:u,U=I&&q!==u&&this.options.updateMissing;if(T||O||U){if(this.logger.log(U?"updateKey":"missingKey",c,l,a,U?q:u),i){const x=this.resolve(a,{...t,keySeparator:!1});x&&x.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let h=[];const g=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&g&&g[0])for(let x=0;x<g.length;x++)h.push(g[x]);else this.options.saveMissingTo==="all"?h=this.languageUtils.toResolveHierarchy(t.lng||this.language):h.push(t.lng||this.language);const S=(x,L,P)=>{const G=I&&P!==u?P:Ce;this.options.missingKeyHandler?this.options.missingKeyHandler(x,l,L,G,U,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(x,l,L,G,U,t),this.emit("missingKey",x,l,L,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&F?h.forEach(x=>{const L=this.pluralResolver.getSuffixes(x,t);fe&&t[`defaultValue${this.options.pluralSeparator}zero`]&&L.indexOf(`${this.options.pluralSeparator}zero`)<0&&L.push(`${this.options.pluralSeparator}zero`),L.forEach(P=>{S([x],a+P,t[`defaultValue${P}`]||q)})}):S(h,a,q))}u=this.extendTranslation(u,e,t,f,n),T&&u===a&&this.options.appendNamespaceToMissingKey&&(u=`${l}:${a}`),(T||O)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${a}`:a,O?u:void 0):u=this.options.parseMissingKeyHandler(u))}return s?(f.res=u,f.usedParams=this.getUsedParamsDetails(t),f):u}extendTranslation(e,t,n,s,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const c=w(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const u=e.match(this.interpolator.nestingRegexp);d=u&&u.length}let f=n.replace&&!w(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,n.lng||this.language||s.usedLng,n),c){const u=e.match(this.interpolator.nestingRegexp),p=u&&u.length;d<p&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var u=arguments.length,p=new Array(u),v=0;v<u;v++)p[v]=arguments[v];return i&&i[0]===p[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):a.translate(...p,t)},n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=w(o)?[o]:o;return e!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(e=bt.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,s,i,a,o;return w(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const c=this.extractFromKey(l,t),d=c.key;s=d;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const u=t.count!==void 0&&!w(t.count),p=u&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),v=t.context!==void 0&&(w(t.context)||typeof t.context=="number")&&t.context!=="",m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(y=>{this.isValidLookup(n)||(o=y,!Qe[`${m[0]}-${y}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(Qe[`${m[0]}-${y}`]=!0,this.logger.warn(`key "${s}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(k=>{if(this.isValidLookup(n))return;a=k;const b=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,d,k,y,t);else{let O;u&&(O=this.pluralResolver.getSuffix(k,t.count,t));const T=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(b.push(d+O),t.ordinal&&O.indexOf(F)===0&&b.push(d+O.replace(F,this.options.pluralSeparator)),p&&b.push(d+T)),v){const I=`${d}${this.options.contextSeparator}${t.context}`;b.push(I),u&&(b.push(I+O),t.ordinal&&O.indexOf(F)===0&&b.push(I+O.replace(F,this.options.pluralSeparator)),p&&b.push(I+T))}}let A;for(;A=b.pop();)this.isValidLookup(n)||(i=A,n=this.getResource(k,y,A,t))}))})}),{res:n,usedKey:s,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,s):this.resourceStore.getResource(e,t,n,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!w(e.replace);let s=n?e.replace:e;if(n&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const i of t)delete s[i]}return s}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}const Ie=r=>r.charAt(0).toUpperCase()+r.slice(1);class Ye{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=j.create("languageUtils")}getScriptPartFromCode(e){if(e=we(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=we(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(w(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(s=>s.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Ie(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Ie(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Ie(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),w(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],i=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return w(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):w(e)&&i(this.formatLanguageCode(e)),n.forEach(a=>{s.indexOf(a)<0&&i(this.formatLanguageCode(a))}),s}}let Rn=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],$n={1:r=>+(r>1),2:r=>+(r!=1),3:r=>0,4:r=>r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,5:r=>r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5,6:r=>r==1?0:r>=2&&r<=4?1:2,7:r=>r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2,8:r=>r==1?0:r==2?1:r!=8&&r!=11?2:3,9:r=>+(r>=2),10:r=>r==1?0:r==2?1:r<7?2:r<11?3:4,11:r=>r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3,12:r=>+(r%10!=1||r%100==11),13:r=>+(r!==0),14:r=>r==1?0:r==2?1:r==3?2:3,15:r=>r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2,16:r=>r%10==1&&r%100!=11?0:r!==0?1:2,17:r=>r==1||r%10==1&&r%100!=11?0:1,18:r=>r==0?0:r==1?1:2,19:r=>r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3,20:r=>r==1?0:r==0||r%100>0&&r%100<20?1:2,21:r=>r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0,22:r=>r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3};const Nn=["v1","v2","v3"],Mn=["v4"],Ze={zero:0,one:1,two:2,few:3,many:4,other:5},_n=()=>{const r={};return Rn.forEach(e=>{e.lngs.forEach(t=>{r[t]={numbers:e.nr,plurals:$n[e.fc]}})}),r};class jn{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=j.create("pluralResolver"),(!this.options.compatibilityJSON||Mn.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=_n(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=we(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[i]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((s,i)=>Ze[s]-Ze[i]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):n.numbers.map(s=>this.getSuffix(e,s,t)):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,n);return s?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:this.getSuffixRetroCompatible(s,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let s=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Nn.includes(this.options.compatibilityJSON)}}const et=function(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=On(r,e,t);return!i&&s&&w(t)&&(i=Re(r,t,n),i===void 0&&(i=Re(e,t,n))),i},De=r=>r.replace(/\$/g,"$$$$");class Un{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=j.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:u,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:m,nestingOptionsSeparator:y,maxReplaces:k,alwaysFormat:b}=e.interpolation;this.escape=t!==void 0?t:An,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?X(i):a||"{{",this.suffix=o?X(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=u?X(u):p||X("$t("),this.nestingSuffix=v?X(v):m||X(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=k||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t&&t.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,s){let i,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=p=>{if(p.indexOf(this.formatSeparator)<0){const k=et(t,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(k,void 0,n,{...s,...t,interpolationkey:p}):k}const v=p.split(this.formatSeparator),m=v.shift().trim(),y=v.join(this.formatSeparator).trim();return this.format(et(t,l,m,this.options.keySeparator,this.options.ignoreJSONStructure),y,n,{...s,...t,interpolationkey:m})};this.resetRegExp();const d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,f=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>De(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?De(this.escape(p)):De(p)}].forEach(p=>{for(o=0;i=p.regex.exec(e);){const v=i[1].trim();if(a=c(v),a===void 0)if(typeof d=="function"){const y=d(e,i,s);a=w(y)?y:""}else if(s&&Object.prototype.hasOwnProperty.call(s,v))a="";else if(f){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),a="";else!w(a)&&!this.useRawValueToEscape&&(a=Ve(a));const m=p.safeValue(a);if(e=e.replace(i[0],m),f?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,a;const o=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const f=l.split(new RegExp(`${d}[ ]*{`));let u=`{${f[1]}`;l=f[0],u=this.interpolate(u,a);const p=u.match(/'/g),v=u.match(/"/g);(p&&p.length%2===0&&!v||v.length%2!==0)&&(u=u.replace(/'/g,'"'));try{a=JSON.parse(u),c&&(a={...c,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${d}${u}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];a={...n},a=a.replace&&!w(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const d=s[1].split(this.formatSeparator).map(f=>f.trim());s[1]=d.shift(),l=d,c=!0}if(i=t(o.call(this,s[1].trim(),a),a),i&&s[0]===e&&!w(i))return i;w(i)||(i=Ve(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),c&&(i=l.reduce((d,f)=>this.format(d,f,n.lng,{...n,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const zn=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const n=r.split("(");e=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();t[d]||(t[d]=c),c==="false"&&(t[d]=!1),c==="true"&&(t[d]=!0),isNaN(c)||(t[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},Q=r=>{const e={};return(t,n,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=n+JSON.stringify(i);let o=e[a];return o||(o=r(we(n),s),e[a]=o),o(t)}};class Bn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=j.create("formatter"),this.options=e,this.formats={number:Q((t,n)=>{const s=new Intl.NumberFormat(t,{...n});return i=>s.format(i)}),currency:Q((t,n)=>{const s=new Intl.NumberFormat(t,{...n,style:"currency"});return i=>s.format(i)}),datetime:Q((t,n)=>{const s=new Intl.DateTimeFormat(t,{...n});return i=>s.format(i)}),relativetime:Q((t,n)=>{const s=new Intl.RelativeTimeFormat(t,{...n});return i=>s.format(i,n.range||"day")}),list:Q((t,n)=>{const s=new Intl.ListFormat(t,{...n});return i=>s.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Q(t)}format(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,l)=>{const{formatName:c,formatOptions:d}=zn(l);if(this.formats[c]){let f=o;try{const u=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},p=u.locale||u.lng||s.locale||s.lng||n;f=this.formats[c](o,p,{...d,...s,...u})}catch(u){this.logger.warn(u)}return f}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const Hn=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class qn extends Oe{constructor(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=j.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,s.backend,s)}queueLoad(e,t,n,s){const i={},a={},o={},l={};return e.forEach(c=>{let d=!0;t.forEach(f=>{const u=`${c}|${f}`;!n.reload&&this.store.hasResourceBundle(c,f)?this.state[u]=2:this.state[u]<0||(this.state[u]===1?a[u]===void 0&&(a[u]=!0):(this.state[u]=1,d=!1,a[u]===void 0&&(a[u]=!0),i[u]===void 0&&(i[u]=!0),l[f]===void 0&&(l[f]=!0)))}),d||(o[c]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,n){const s=e.split("|"),i=s[0],a=s[1];t&&this.emit("failedLoading",i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{Ln(l.loaded,[i],a),Hn(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const d=l.loaded[c];d.length&&d.forEach(f=>{o[c][f]===void 0&&(o[c][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:s,wait:i,callback:a});return}this.readingCalls++;const o=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,s+1,i*2,a)},i);return}a(c,d)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(d=>o(null,d)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,t,o)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();w(e)&&(e=this.languageUtils.toResolveHierarchy(e)),w(t)&&(t=[t]);const i=this.queueLoad(e,t,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${i} for language ${s} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,t,n,s,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(e,t,n,s,l):d=c(e,t,n,s),d&&typeof d.then=="function"?d.then(f=>o(null,f)).catch(o):o(null,d)}catch(d){o(d)}else c(e,t,n,s,o,l)}!e||!e[0]||this.store.addResource(e[0],t,n,s)}}}const tt=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),w(r[1])&&(e.defaultValue=r[1]),w(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),nt=r=>(w(r.ns)&&(r.ns=[r.ns]),w(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),w(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r),me=()=>{},Gn=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class ue extends Oe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=nt(e),this.services={},this.logger=j,this.modules={external:[]},Gn(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(w(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=tt();this.options={...s,...this.options,...nt(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?j.init(i(this.modules.logger),this.options):j.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=Bn);const f=new Ye(this.options);this.store=new Xe(this.options.resources,this.options);const u=this.services;u.logger=j,u.resourceStore=this.store,u.languageUtils=f,u.pluralResolver=new jn(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(u.formatter=i(d),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Un(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new qn(i(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(p){for(var v=arguments.length,m=new Array(v>1?v-1:0),y=1;y<v;y++)m[y-1]=arguments[y];e.emit(p,...m)}),this.modules.languageDetector&&(u.languageDetector=i(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=i(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new xe(this.services,this.options),this.translator.on("*",function(p){for(var v=arguments.length,m=new Array(v>1?v-1:0),y=1;y<v;y++)m[y-1]=arguments[y];e.emit(p,...m)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=me),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const l=te(),c=()=>{const d=(f,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(u),n(f,u)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:me;const s=w(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],a=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};s?a(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(o=>a(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(o)})}else n(null)}reloadResources(e,t,n){const s=te();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=me),this.services.backendConnector.reload(e,t,i=>{s.resolve(),n(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&bt.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const s=te();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return n.t(...arguments)}),t&&t(l,function(){return n.t(...arguments)})},o=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=w(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{a(d,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,t,n){var s=this;const i=function(a,o){let l;if(typeof o!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),f=2;f<c;f++)d[f-2]=arguments[f];l=s.options.overloadTranslationOptionHandler([a,o].concat(d))}else l={...o};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||i.keyPrefix);const u=s.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(a)?p=a.map(v=>`${l.keyPrefix}${u}${v}`):p=l.keyPrefix?`${l.keyPrefix}${u}${a}`:a,s.t(p,l)};return w(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!s||a(i,e)))}loadNamespaces(e,t){const n=te();return this.options.ns?(w(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),t&&t(s)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=te();w(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=s.concat(i),this.loadResources(a=>{n.resolve(),t&&t(a)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new Ye(tt());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new ue(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:me;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new ue(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new Xe(this.store.data,s),i.services.resourceStore=i.store),i.translator=new xe(i.services,s),i.translator.on("*",function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];i.emit(o,...c)}),i.init(s,t),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const E=ue.createInstance();E.createInstance=ue.createInstance;E.createInstance;E.dir;E.init;E.loadResources;E.reloadResources;E.use;E.changeLanguage;E.getFixedT;E.t;E.exists;E.setDefaultNamespace;E.hasLoadedNamespace;E.loadNamespaces;E.loadLanguages;function $e(r){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(r)}function wt(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":$e(XMLHttpRequest))==="object"}function Vn(r){return!!r&&typeof r.then=="function"}function Kn(r){return Vn(r)?r:Promise.resolve(r)}function Jn(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ye={exports:{}},ve={exports:{}},st;function Wn(){return st||(st=1,(function(r,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof re<"u"&&re,n=(function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i})();(function(i){(function(a){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof o<"u"&&o,l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(h){return h&&DataView.prototype.isPrototypeOf(h)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(h){return h&&d.indexOf(Object.prototype.toString.call(h))>-1};function u(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function p(h){return typeof h!="string"&&(h=String(h)),h}function v(h){var g={next:function(){var S=h.shift();return{done:S===void 0,value:S}}};return l.iterable&&(g[Symbol.iterator]=function(){return g}),g}function m(h){this.map={},h instanceof m?h.forEach(function(g,S){this.append(S,g)},this):Array.isArray(h)?h.forEach(function(g){this.append(g[0],g[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(g){this.append(g,h[g])},this)}m.prototype.append=function(h,g){h=u(h),g=p(g);var S=this.map[h];this.map[h]=S?S+", "+g:g},m.prototype.delete=function(h){delete this.map[u(h)]},m.prototype.get=function(h){return h=u(h),this.has(h)?this.map[h]:null},m.prototype.has=function(h){return this.map.hasOwnProperty(u(h))},m.prototype.set=function(h,g){this.map[u(h)]=p(g)},m.prototype.forEach=function(h,g){for(var S in this.map)this.map.hasOwnProperty(S)&&h.call(g,this.map[S],S,this)},m.prototype.keys=function(){var h=[];return this.forEach(function(g,S){h.push(S)}),v(h)},m.prototype.values=function(){var h=[];return this.forEach(function(g){h.push(g)}),v(h)},m.prototype.entries=function(){var h=[];return this.forEach(function(g,S){h.push([S,g])}),v(h)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function y(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function k(h){return new Promise(function(g,S){h.onload=function(){g(h.result)},h.onerror=function(){S(h.error)}})}function b(h){var g=new FileReader,S=k(g);return g.readAsArrayBuffer(h),S}function A(h){var g=new FileReader,S=k(g);return g.readAsText(h),S}function O(h){for(var g=new Uint8Array(h),S=new Array(g.length),x=0;x<g.length;x++)S[x]=String.fromCharCode(g[x]);return S.join("")}function T(h){if(h.slice)return h.slice(0);var g=new Uint8Array(h.byteLength);return g.set(new Uint8Array(h)),g.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:l.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:l.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():l.arrayBuffer&&l.blob&&c(h)?(this._bodyArrayBuffer=T(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||f(h))?this._bodyArrayBuffer=T(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var h=y(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=y(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(b)}),this.text=function(){var h=y(this);if(h)return h;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(fe)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function J(h){var g=h.toUpperCase();return I.indexOf(g)>-1?g:h}function _(h,g){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');g=g||{};var S=g.body;if(h instanceof _){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,g.headers||(this.headers=new m(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!S&&h._bodyInit!=null&&(S=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new m(g.headers)),this.method=J(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(S),(this.method==="GET"||this.method==="HEAD")&&(g.cache==="no-store"||g.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function fe(h){var g=new FormData;return h.trim().split("&").forEach(function(S){if(S){var x=S.split("="),L=x.shift().replace(/\+/g," "),P=x.join("=").replace(/\+/g," ");g.append(decodeURIComponent(L),decodeURIComponent(P))}}),g}function q(h){var g=new m,S=h.replace(/\r?\n[\t ]+/g," ");return S.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var L=x.split(":"),P=L.shift().trim();if(P){var G=L.join(":").trim();g.append(P,G)}}),g}F.call(_.prototype);function R(h,g){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.ok=this.status>=200&&this.status<300,this.statusText=g.statusText===void 0?"":""+g.statusText,this.headers=new m(g.headers),this.url=g.url||"",this._initBody(h)}F.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},R.error=function(){var h=new R(null,{status:0,statusText:""});return h.type="error",h};var Ce=[301,302,303,307,308];R.redirect=function(h,g){if(Ce.indexOf(g)===-1)throw new RangeError("Invalid status code");return new R(null,{status:g,headers:{location:h}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(g,S){this.message=g,this.name=S;var x=Error(g);this.stack=x.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function U(h,g){return new Promise(function(S,x){var L=new _(h,g);if(L.signal&&L.signal.aborted)return x(new a.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function G(){P.abort()}P.onload=function(){var $={status:P.status,statusText:P.statusText,headers:q(P.getAllResponseHeaders()||"")};$.url="responseURL"in P?P.responseURL:$.headers.get("X-Request-URL");var ge="response"in P?P.response:P.responseText;setTimeout(function(){S(new R(ge,$))},0)},P.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},P.onabort=function(){setTimeout(function(){x(new a.DOMException("Aborted","AbortError"))},0)};function Tt($){try{return $===""&&o.location.href?o.location.href:$}catch{return $}}P.open(L.method,Tt(L.url),!0),L.credentials==="include"?P.withCredentials=!0:L.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(l.blob?P.responseType="blob":l.arrayBuffer&&L.headers.get("Content-Type")&&L.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(P.responseType="arraybuffer")),g&&typeof g.headers=="object"&&!(g.headers instanceof m)?Object.getOwnPropertyNames(g.headers).forEach(function($){P.setRequestHeader($,p(g.headers[$]))}):L.headers.forEach(function($,ge){P.setRequestHeader(ge,$)}),L.signal&&(L.signal.addEventListener("abort",G),P.onreadystatechange=function(){P.readyState===4&&L.signal.removeEventListener("abort",G)}),P.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return U.polyfill=!0,o.fetch||(o.fetch=U,o.Headers=m,o.Request=_,o.Response=R),a.Headers=m,a.Request=_,a.Response=R,a.fetch=U,a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=t.fetch?t:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(ve,ve.exports)),ve.exports}var rt;function Xn(){return rt||(rt=1,(function(r,e){var t=typeof fetch=="function"?fetch:void 0;if(typeof re<"u"&&re.fetch?t=re.fetch:typeof window<"u"&&window.fetch&&(t=window.fetch),typeof Jn<"u"&&typeof window>"u"){var n=t||Wn();n.default&&(n=n.default),e.default=n,r.exports=e.default}})(ye,ye.exports)),ye.exports}var St=Xn();const xt=Ft(St),it=Rt({__proto__:null,default:xt},[St]);function at(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function ot(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?at(Object(t),!0).forEach(function(n){Qn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):at(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Qn(r,e,t){return(e=Yn(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Yn(r){var e=Zn(r,"string");return K(e)=="symbol"?e:e+""}function Zn(r,e){if(K(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(K(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function K(r){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(r)}var H=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?H=global.fetch:typeof window<"u"&&window.fetch&&(H=window.fetch);var he;wt()&&(typeof global<"u"&&global.XMLHttpRequest?he=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(he=window.XMLHttpRequest));var Pe;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Pe=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Pe=window.ActiveXObject));!H&&it&&!he&&!Pe&&(H=xt||it);typeof H!="function"&&(H=void 0);var Ne=function(e,t){if(t&&K(t)==="object"){var n="";for(var s in t)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t[s]);if(!n)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+n.slice(1)}return e},lt=function(e,t,n,s){var i=function(l){if(!l.ok)return n(l.statusText||"Error",{status:l.status});l.text().then(function(c){n(null,{status:l.status,data:c})}).catch(n)};if(s){var a=s(e,t);if(a instanceof Promise){a.then(i).catch(n);return}}typeof fetch=="function"?fetch(e,t).then(i).catch(n):H(e,t).then(i).catch(n)},ct=!1,es=function(e,t,n,s){e.queryStringParams&&(t=Ne(t,e.queryStringParams));var i=ot({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(i["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(n):e.requestOptions,o=ot({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},ct?{}:a),l=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{lt(t,o,s,l)}catch(c){if(!a||Object.keys(a).length===0||!c.message||c.message.indexOf("not implemented")<0)return s(c);try{Object.keys(a).forEach(function(d){delete o[d]}),lt(t,o,s,l),ct=!0}catch(d){s(d)}}},ts=function(e,t,n,s){n&&K(n)==="object"&&(n=Ne("",n).slice(1)),e.queryStringParams&&(t=Ne(t,e.queryStringParams));try{var i;he?i=new he:i=new Pe("MSXML2.XMLHTTP.3.0"),i.open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var o in a)i.setRequestHeader(o,a[o]);i.onreadystatechange=function(){i.readyState>3&&s(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(l){console&&console.log(l)}},ns=function(e,t,n,s){if(typeof n=="function"&&(s=n,n=void 0),s=s||function(){},H&&t.indexOf("file:")!==0)return es(e,t,n,s);if(wt()||typeof ActiveXObject=="function")return ts(e,t,n,s);s(new Error("No fetch and no xhr implementation found!"))};function Z(r){"@babel/helpers - typeof";return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(r)}function ut(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Fe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ut(Object(t),!0).forEach(function(n){Pt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ss(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,kt(n.key),n)}}function is(r,e,t){return e&&rs(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Pt(r,e,t){return(e=kt(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kt(r){var e=as(r,"string");return Z(e)=="symbol"?e:e+""}function as(r,e){if(Z(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Z(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var os=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,n,s){return Pt({},n,s||"")},parseLoadPayload:function(t,n){},request:ns,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Lt=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ss(this,r),this.services=e,this.options=t,this.allOptions=n,this.type="backend",this.init(e,t,n)}return is(r,[{key:"init",value:function(t){var n=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=Fe(Fe(Fe({},os()),this.options||{}),s),this.allOptions=i,this.services&&this.options.reloadInterval){var a=setInterval(function(){return n.reload()},this.options.reloadInterval);Z(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(t,n,s){this._readAny(t,t,n,n,s)}},{key:"read",value:function(t,n,s){this._readAny([t],t,[n],n,s)}},{key:"_readAny",value:function(t,n,s,i,a){var o=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(t,s)),l=Kn(l),l.then(function(c){if(!c)return a(null,{});var d=o.services.interpolator.interpolate(c,{lng:t.join("+"),ns:s.join("+")});o.loadUrl(d,a,n,i)})}},{key:"loadUrl",value:function(t,n,s,i){var a=this,o=typeof s=="string"?[s]:s,l=typeof i=="string"?[i]:i,c=this.options.parseLoadPayload(o,l);this.options.request(this.options,t,c,function(d,f){if(f&&(f.status>=500&&f.status<600||!f.status))return n("failed loading "+t+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return n("failed loading "+t+"; status code: "+f.status,!1);if(!f&&d&&d.message){var u=d.message.toLowerCase(),p=["failed","fetch","network","load"].find(function(y){return u.indexOf(y)>-1});if(p)return n("failed loading "+t+": "+d.message,!0)}if(d)return n(d,!1);var v,m;try{typeof f.data=="string"?v=a.options.parse(f.data,s,i):v=f.data}catch{m="failed parsing "+t+" to json"}if(m)return n(m,!1);n(null,v)})}},{key:"create",value:function(t,n,s,i,a){var o=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var l=this.options.parsePayload(n,s,i),c=0,d=[],f=[];t.forEach(function(u){var p=o.options.addPath;typeof o.options.addPath=="function"&&(p=o.options.addPath(u,n));var v=o.services.interpolator.interpolate(p,{lng:u,ns:n});o.options.request(o.options,v,l,function(m,y){c+=1,d.push(m),f.push(y),c===t.length&&typeof a=="function"&&a(d,f)})})}}},{key:"reload",value:function(){var t=this,n=this.services,s=n.backendConnector,i=n.languageUtils,a=n.logger,o=s.language;if(!(o&&o.toLowerCase()==="cimode")){var l=[],c=function(f){var u=i.toResolveHierarchy(f);u.forEach(function(p){l.indexOf(p)<0&&l.push(p)})};c(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(d){return c(d)}),l.forEach(function(d){t.allOptions.ns.forEach(function(f){s.read(d,f,"read",null,null,function(u,p){u&&a.warn("loading namespace ".concat(f," for language ").concat(d," failed"),u),!u&&p&&a.log("loaded namespace ".concat(f," for language ").concat(d),p),s.loaded("".concat(d,"|").concat(f),u,p)})})})}}}])})();Lt.type="backend";function ls(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function de(r){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(r)}function cs(r,e){if(de(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(de(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function us(r){var e=cs(r,"string");return de(e)=="symbol"?e:e+""}function hs(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,us(n.key),n)}}function ds(r,e,t){return e&&hs(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}var Ot=[],fs=Ot.forEach,gs=Ot.slice;function ps(r){return fs.call(gs.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}var ht=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ms=function(e,t,n){var s=n||{};s.path=s.path||"/";var i=encodeURIComponent(t),a="".concat(e,"=").concat(i);if(s.maxAge>0){var o=s.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(o))}if(s.domain){if(!ht.test(s.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(s.domain)}if(s.path){if(!ht.test(s.path))throw new TypeError("option path is invalid");a+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},dt={create:function(e,t,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),s&&(i.domain=s),document.cookie=ms(e,encodeURIComponent(t),i)},read:function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),s=0;s<n.length;s++){for(var i=n[s];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},ys={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var n=dt.read(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&dt.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},vs={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=n.substring(1),i=s.split("&"),a=0;a<i.length;a++){var o=i[a].indexOf("=");if(o>0){var l=i[a].substring(0,o);l===e.lookupQuerystring&&(t=i[a].substring(o+1))}}}return t}},ne=null,ft=function(){if(ne!==null)return ne;try{ne=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{ne=!1}return ne},bs={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&ft()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&ft()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},se=null,gt=function(){if(se!==null)return se;try{se=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{se=!1}return se},ws={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&gt()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&gt()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},Ss={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},xs={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(t=n.getAttribute("lang")),t}},Ps={name:"path",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},ks={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}},Ct=!1;try{document.cookie,Ct=!0}catch{}var At=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ct||At.splice(1,1);function Ls(){return{order:At,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var Et=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ls(this,r),this.type="languageDetector",this.detectors={},this.init(e,t)}return ds(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=ps(n,this.options||{},Ls()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(ys),this.addDetector(vs),this.addDetector(bs),this.addDetector(ws),this.addDetector(Ss),this.addDetector(xs),this.addDetector(Ps),this.addDetector(ks)}},{key:"addDetector",value:function(t){return this.detectors[t.name]=t,this}},{key:"detect",value:function(t){var n=this;t||(t=this.options.order);var s=[];return t.forEach(function(i){if(n.detectors[i]){var a=n.detectors[i].lookup(n.options);a&&typeof a=="string"&&(a=[a]),a&&(s=s.concat(a))}}),s=s.map(function(i){return n.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(t,n){var s=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(function(i){s.detectors[i]&&s.detectors[i].cacheUserLanguage(t,s.options)}))}}])})();Et.type="languageDetector";const B={en:{code:"en",name:"English",nativeName:"English",flag:"🇺🇸",rtl:!1},es:{code:"es",name:"Spanish",nativeName:"Español",flag:"🇪🇸",rtl:!1},fr:{code:"fr",name:"French",nativeName:"Français",flag:"🇫🇷",rtl:!1},de:{code:"de",name:"German",nativeName:"Deutsch",flag:"🇩🇪",rtl:!1},it:{code:"it",name:"Italian",nativeName:"Italiano",flag:"🇮🇹",rtl:!1},pt:{code:"pt",name:"Portuguese",nativeName:"Português",flag:"🇵🇹",rtl:!1},ru:{code:"ru",name:"Russian",nativeName:"Русский",flag:"🇷🇺",rtl:!1},ja:{code:"ja",name:"Japanese",nativeName:"日本語",flag:"🇯🇵",rtl:!1},ko:{code:"ko",name:"Korean",nativeName:"한국어",flag:"🇰🇷",rtl:!1},zh:{code:"zh",name:"Chinese",nativeName:"中文",flag:"🇨🇳",rtl:!1},ar:{code:"ar",name:"Arabic",nativeName:"العربية",flag:"🇸🇦",rtl:!0},he:{code:"he",name:"Hebrew",nativeName:"עברית",flag:"🇮🇱",rtl:!0}},pt={en:{common:{loading:"Loading...",error:"Error",retry:"Retry",close:"Close",save:"Save",cancel:"Cancel",yes:"Yes",no:"No",continue:"Continue",back:"Back",next:"Next",previous:"Previous"},game:{title:"SprintSolve",subtitle:"Test your knowledge at lightning speed!",startGame:"Start Game",playAgain:"Play Again",paused:"Paused",gameOver:"Game Over",score:"Score",lives:"Lives",level:"Level",correct:"Correct!",incorrect:"Incorrect!",timeUp:"Time's up!",finalScore:"Final Score",newHighScore:"New High Score!",pressToJump:"Press SPACE or tap to jump",pressToContinue:"Press P to continue",shieldUsed:"Shield Used!"},menu:{play:"Play",settings:"Settings",leaderboard:"Leaderboard",achievements:"Achievements",statistics:"Statistics",about:"About",credits:"Credits",quit:"Quit"},settings:{title:"Settings",audio:"Audio",graphics:"Graphics",controls:"Controls",language:"Language",theme:"Theme",difficulty:"Difficulty",volume:"Volume",soundEffects:"Sound Effects",music:"Music",fullscreen:"Fullscreen",notifications:"Notifications"},categories:{generalKnowledge:"General Knowledge",science:"Science",history:"History",geography:"Geography",sports:"Sports",entertainment:"Entertainment",art:"Art & Literature",mythology:"Mythology",politics:"Politics",animals:"Animals"},privacy:{cookieConsent:"We value your privacy",cookieDescription:"We use cookies and similar technologies to enhance your gaming experience.",necessary:"Necessary",analytics:"Analytics",marketing:"Marketing",preferences:"Preferences",acceptAll:"Accept All",acceptNecessary:"Necessary Only",customize:"Customize",privacyPolicy:"Privacy Policy"}}};class Os{currentLanguage="en";isInitialized=!1;changeListeners=new Set;constructor(){this.currentLanguage=this.detectLanguage()}async initialize(e={}){const{fallbackLanguage:t="en",debug:n=!1,loadPath:s="/locales/{{lng}}/{{ns}}.json"}=e;try{await E.use(Lt).use(Et).init({lng:this.currentLanguage,fallbackLng:t,debug:n,backend:{loadPath:s},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},resources:{en:{translation:pt.en}},interpolation:{escapeValue:!1}}),this.isInitialized=!0,this.currentLanguage=E.language||"en",this.applyTextDirection(),console.log(`I18n initialized with language: ${this.currentLanguage}`)}catch(i){console.error("Failed to initialize i18n:",i),this.isInitialized=!0}}async changeLanguage(e){this.isInitialized||await this.initialize();try{await E.changeLanguage(e),this.currentLanguage=e,this.applyTextDirection(),localStorage.setItem("i18n_language",e),this.changeListeners.forEach(t=>t(e)),console.log(`Language changed to: ${e}`)}catch(t){console.error("Failed to change language:",t)}}t(e,t){if(!this.isInitialized){const n=e.split(".");let s=pt.en;for(const i of n)if(s=s?.[i],!s)break;return s||e}return E.t(e,t)}getCurrentLanguage(){return this.currentLanguage}getLanguageConfig(e){return B[e]}getSupportedLanguages(){return Object.values(B)}isRTL(){return B[this.currentLanguage]?.rtl||!1}formatNumber(e,t){try{return new Intl.NumberFormat(this.currentLanguage,t).format(e)}catch{return e.toString()}}formatDate(e,t){try{return new Intl.DateTimeFormat(this.currentLanguage,t).format(e)}catch{return e.toLocaleDateString()}}onLanguageChange(e){return this.changeListeners.add(e),()=>this.changeListeners.delete(e)}detectLanguage(){const e=localStorage.getItem("i18n_language");if(e&&e in B)return e;const t=navigator.language.split("-")[0];if(t in B)return t;for(const n of navigator.languages){const s=n.split("-")[0];if(s in B)return s}return"en"}applyTextDirection(){const e=this.isRTL(),t=document.documentElement;e?(t.setAttribute("dir","rtl"),t.setAttribute("lang",this.currentLanguage),document.body.classList.add("rtl"),document.body.classList.remove("ltr")):(t.setAttribute("dir","ltr"),t.setAttribute("lang",this.currentLanguage),document.body.classList.add("ltr"),document.body.classList.remove("rtl"))}}const Y=new Os,C=(r,e)=>Y.t(r,e);class Cs{consentBanner=null;preferencesModal=null;currentPreferences;constructor(){this.currentPreferences=this.loadConsentPreferences(),this.init()}init(){this.shouldShowConsent()?this.createConsentBanner():this.applyConsent(),document.addEventListener("show-consent-preferences",()=>{this.showPreferencesModal()})}shouldShowConsent(){const e=localStorage.getItem("consent_preferences"),t=localStorage.getItem("consent_version");return!e||t!=="1.0"}loadConsentPreferences(){const e=localStorage.getItem("consent_preferences");return e?JSON.parse(e):{necessary:!0,analytics:!1,marketing:!1,preferences:!1}}saveConsentPreferences(e){localStorage.setItem("consent_preferences",JSON.stringify(e)),localStorage.setItem("consent_version","1.0"),localStorage.setItem("consent_timestamp",Date.now().toString()),this.currentPreferences=e,this.applyConsent()}applyConsent(){N.updateConsent(this.currentPreferences.analytics),this.currentPreferences.analytics&&N.initialize({userConsent:!0}),this.applyMarketingConsent(this.currentPreferences.marketing),this.applyPreferencesConsent(this.currentPreferences.preferences),document.dispatchEvent(new CustomEvent("consent-updated",{detail:this.currentPreferences}))}applyMarketingConsent(e){console.log(e?"Marketing consent granted":"Marketing consent denied")}applyPreferencesConsent(e){console.log(e?"Preferences consent granted":"Preferences consent denied")}createConsentBanner(){this.consentBanner=document.createElement("div"),this.consentBanner.className="consent-banner",this.consentBanner.innerHTML=`
      <div class="consent-content">
        <div class="consent-text">
          <h3>🍪 ${C("privacy.cookieConsent")}</h3>
          <p>${C("privacy.cookieDescription")}</p>
        </div>
        <div class="consent-actions">
          <button class="btn-accept-all" type="button">${C("privacy.acceptAll")}</button>
          <button class="btn-accept-necessary" type="button">${C("privacy.acceptNecessary")}</button>
          <button class="btn-preferences" type="button">${C("privacy.customize")}</button>
          <a href="#privacy-policy" class="privacy-link">${C("privacy.privacyPolicy")}</a>
        </div>
      </div>
    `,this.addConsentStyles(),this.attachConsentEvents(),document.body.appendChild(this.consentBanner),setTimeout(()=>{this.consentBanner?.classList.add("show")},100)}attachConsentEvents(){if(!this.consentBanner)return;const e=this.consentBanner.querySelector(".btn-accept-all"),t=this.consentBanner.querySelector(".btn-accept-necessary"),n=this.consentBanner.querySelector(".btn-preferences");e?.addEventListener("click",()=>{this.saveConsentPreferences({necessary:!0,analytics:!0,marketing:!0,preferences:!0}),this.hideConsentBanner()}),t?.addEventListener("click",()=>{this.saveConsentPreferences({necessary:!0,analytics:!1,marketing:!1,preferences:!1}),this.hideConsentBanner()}),n?.addEventListener("click",()=>{this.showPreferencesModal()})}hideConsentBanner(){this.consentBanner&&(this.consentBanner.classList.remove("show"),setTimeout(()=>{this.consentBanner?.remove(),this.consentBanner=null},300))}showPreferencesModal(){this.createPreferencesModal()}createPreferencesModal(){this.preferencesModal=document.createElement("div"),this.preferencesModal.className="consent-modal-overlay",this.preferencesModal.innerHTML=`
      <div class="consent-modal">
        <div class="modal-header">
          <h2>Privacy Preferences</h2>
          <button class="close-btn" type="button">×</button>
        </div>
        <div class="modal-content">
          <p>Choose which cookies and data processing you're comfortable with. You can change these settings at any time.</p>
          
          <div class="preference-group">
            <div class="preference-header">
              <label class="preference-label">
                <input type="checkbox" checked disabled>
                <span class="checkmark"></span>
                <strong>Necessary</strong>
              </label>
            </div>
            <p class="preference-description">Required for basic site functionality, game saves, and security.</p>
          </div>
          
          <div class="preference-group">
            <div class="preference-header">
              <label class="preference-label">
                <input type="checkbox" id="analytics-consent" ${this.currentPreferences.analytics?"checked":""}>
                <span class="checkmark"></span>
                <strong>Analytics</strong>
              </label>
            </div>
            <p class="preference-description">Help us understand how you play and improve the game experience.</p>
          </div>
          
          <div class="preference-group">
            <div class="preference-header">
              <label class="preference-label">
                <input type="checkbox" id="marketing-consent" ${this.currentPreferences.marketing?"checked":""}>
                <span class="checkmark"></span>
                <strong>Marketing</strong>
              </label>
            </div>
            <p class="preference-description">Personalized content and recommendations based on your interests.</p>
          </div>
          
          <div class="preference-group">
            <div class="preference-header">
              <label class="preference-label">
                <input type="checkbox" id="preferences-consent" ${this.currentPreferences.preferences?"checked":""}>
                <span class="checkmark"></span>
                <strong>Preferences</strong>
              </label>
            </div>
            <p class="preference-description">Remember your settings and provide a personalized experience.</p>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn-save" type="button">Save Preferences</button>
          <button class="btn-cancel" type="button">Cancel</button>
        </div>
      </div>
    `,this.attachPreferencesEvents(),document.body.appendChild(this.preferencesModal),setTimeout(()=>{this.preferencesModal?.classList.add("show")},50)}attachPreferencesEvents(){if(!this.preferencesModal)return;const e=this.preferencesModal.querySelector(".close-btn"),t=this.preferencesModal.querySelector(".btn-save"),n=this.preferencesModal.querySelector(".btn-cancel"),s=this.preferencesModal,i=()=>this.hidePreferencesModal();e?.addEventListener("click",i),n?.addEventListener("click",i),s?.addEventListener("click",a=>{a.target===s&&i()}),t?.addEventListener("click",()=>{const a=this.preferencesModal?.querySelector("#analytics-consent"),o=this.preferencesModal?.querySelector("#marketing-consent"),l=this.preferencesModal?.querySelector("#preferences-consent"),c={necessary:!0,analytics:a?.checked||!1,marketing:o?.checked||!1,preferences:l?.checked||!1};this.saveConsentPreferences(c),this.hidePreferencesModal(),this.hideConsentBanner()})}hidePreferencesModal(){this.preferencesModal&&(this.preferencesModal.classList.remove("show"),setTimeout(()=>{this.preferencesModal?.remove(),this.preferencesModal=null},300))}addConsentStyles(){const e="consent-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent=`
      .consent-banner {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        border-top: 2px solid #FF6A00;
        padding: 1.5rem;
        z-index: 10000;
        transform: translateY(100%);
        transition: transform 0.3s ease-out;
        font-family: 'Press Start 2P', monospace;
      }

      .consent-banner.show {
        transform: translateY(0);
      }

      .consent-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 2rem;
        flex-wrap: wrap;
      }

      .consent-text {
        flex: 1;
        min-width: 300px;
      }

      .consent-text h3 {
        color: #FF6A00;
        font-size: 0.8rem;
        margin: 0 0 0.5rem 0;
      }

      .consent-text p {
        color: white;
        font-size: 0.5rem;
        line-height: 1.4;
        margin: 0;
      }

      .consent-actions {
        display: flex;
        gap: 1rem;
        align-items: center;
        flex-wrap: wrap;
      }

      .consent-actions button {
        background: #FF6A00;
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        font-family: 'Press Start 2P', monospace;
        font-size: 0.4rem;
        cursor: pointer;
        transition: all 0.2s;
        border: 2px solid transparent;
      }

      .consent-actions button:hover {
        background: white;
        color: #FF6A00;
        border-color: #FF6A00;
      }

      .btn-accept-necessary {
        background: #666 !important;
      }

      .btn-accept-necessary:hover {
        background: white !important;
        color: #666 !important;
        border-color: #666 !important;
      }

      .privacy-link {
        color: #FF6A00;
        text-decoration: none;
        font-size: 0.4rem;
        border-bottom: 1px solid transparent;
        transition: border-color 0.2s;
      }

      .privacy-link:hover {
        border-bottom-color: #FF6A00;
      }

      .consent-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
        z-index: 10001;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
        padding: 1rem;
      }

      .consent-modal-overlay.show {
        opacity: 1;
      }

      .consent-modal {
        background: #1a1a1a;
        border: 2px solid #FF6A00;
        border-radius: 10px;
        max-width: 600px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        font-family: 'Press Start 2P', monospace;
        transform: scale(0.9);
        transition: transform 0.3s ease;
      }

      .consent-modal-overlay.show .consent-modal {
        transform: scale(1);
      }

      .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid #333;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-header h2 {
        color: #FF6A00;
        font-size: 0.7rem;
        margin: 0;
      }

      .close-btn {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close-btn:hover {
        color: #FF6A00;
      }

      .modal-content {
        padding: 1.5rem;
        color: white;
      }

      .modal-content > p {
        font-size: 0.5rem;
        line-height: 1.4;
        margin-bottom: 1.5rem;
      }

      .preference-group {
        margin-bottom: 1.5rem;
        padding: 1rem;
        background: rgba(255, 106, 0, 0.1);
        border-radius: 5px;
      }

      .preference-header {
        margin-bottom: 0.5rem;
      }

      .preference-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        font-size: 0.5rem;
      }

      .preference-label input[type="checkbox"] {
        margin-right: 0.5rem;
        transform: scale(1.2);
      }

      .preference-description {
        font-size: 0.4rem;
        line-height: 1.3;
        color: #ccc;
        margin: 0;
        margin-left: 1.5rem;
      }

      .modal-actions {
        padding: 1.5rem;
        border-top: 1px solid #333;
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
      }

      .modal-actions button {
        background: #FF6A00;
        color: white;
        border: none;
        padding: 0.5rem 1rem;
        font-family: 'Press Start 2P', monospace;
        font-size: 0.4rem;
        cursor: pointer;
        transition: all 0.2s;
        border: 2px solid transparent;
      }

      .modal-actions button:hover {
        background: white;
        color: #FF6A00;
        border-color: #FF6A00;
      }

      .btn-cancel {
        background: #666 !important;
      }

      .btn-cancel:hover {
        background: white !important;
        color: #666 !important;
        border-color: #666 !important;
      }

      @media (max-width: 768px) {
        .consent-content {
          flex-direction: column;
          text-align: center;
        }

        .consent-actions {
          justify-content: center;
          width: 100%;
        }

        .consent-modal {
          margin: 1rem;
          max-height: calc(100vh - 2rem);
        }
      }
    `,document.head.appendChild(t)}getConsentPreferences(){return{...this.currentPreferences}}hasConsent(e){return this.currentPreferences[e]}showConsentPreferences(){this.showPreferencesModal()}resetConsent(){localStorage.removeItem("consent_preferences"),localStorage.removeItem("consent_version"),localStorage.removeItem("consent_timestamp"),this.currentPreferences={necessary:!0,analytics:!1,marketing:!1,preferences:!1},this.createConsentBanner()}}new Cs;class As{container=null;dropdown=null;config;isOpen=!1;currentLanguage;constructor(e={}){this.config={position:"top-right",showFlags:!0,showNames:!0,compact:!1,...e},this.currentLanguage=Y.getCurrentLanguage(),this.create(),this.setupEventListeners()}create(){this.container=document.createElement("div"),this.container.className=`language-selector ${this.config.position} ${this.config.compact?"compact":""}`;const e=document.createElement("button");e.className="current-language-btn",e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",C("accessibility.languageSelector")),this.updateCurrentLanguageButton(e),this.dropdown=document.createElement("div"),this.dropdown.className="language-dropdown",this.dropdown.setAttribute("role","menu"),this.dropdown.setAttribute("aria-label",C("settings.language")),this.createDropdownItems(),this.container.appendChild(e),this.container.appendChild(this.dropdown),this.addStyles(),document.body.appendChild(this.container)}updateCurrentLanguageButton(e){const t=B[this.currentLanguage],n=this.config.showFlags?`<span class="flag">${t.flag}</span>`:"",s=this.config.showNames&&!this.config.compact?`<span class="name">${t.nativeName}</span>`:"",i='<span class="chevron">▼</span>';e.innerHTML=`${n}${s}${i}`,e.setAttribute("title",`${C("settings.language")}: ${t.nativeName}`)}createDropdownItems(){this.dropdown&&(this.dropdown.innerHTML="",Object.values(B).forEach(e=>{const t=document.createElement("button");t.className=`language-item ${e.code===this.currentLanguage?"active":""}`,t.setAttribute("role","menuitem"),t.setAttribute("data-language",e.code),t.setAttribute("aria-label",`${C("settings.language")}: ${e.nativeName}`);const n=this.config.showFlags?`<span class="flag">${e.flag}</span>`:"",s=this.config.showNames?`<span class="name">${e.nativeName}</span>`:"",i=e.code===this.currentLanguage?'<span class="checkmark">✓</span>':"";t.innerHTML=`${n}${s}${i}`,t.addEventListener("click",async a=>{a.preventDefault(),a.stopPropagation(),await this.selectLanguage(e.code)}),this.dropdown?.appendChild(t)}))}setupEventListeners(){if(!this.container)return;const e=this.container.querySelector(".current-language-btn");e?.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.toggleDropdown()}),document.addEventListener("click",t=>{this.container?.contains(t.target)||this.closeDropdown()}),e?.addEventListener("keydown",t=>{switch(t.key){case"Enter":case" ":case"ArrowDown":t.preventDefault(),this.openDropdown(),this.focusFirstItem();break;case"Escape":this.closeDropdown();break}}),this.dropdown?.addEventListener("keydown",t=>{this.handleDropdownKeydown(t)}),Y.onLanguageChange(t=>{this.currentLanguage=t,this.updateCurrentLanguageButton(e),this.createDropdownItems()})}handleDropdownKeydown(e){if(!this.dropdown)return;const t=Array.from(this.dropdown.querySelectorAll(".language-item")),n=t.findIndex(s=>s===document.activeElement);switch(e.key){case"ArrowDown":{e.preventDefault();const s=(n+1)%t.length;t[s]?.focus();break}case"ArrowUp":{e.preventDefault();const s=n<=0?t.length-1:n-1;t[s]?.focus();break}case"Enter":case" ":e.preventDefault(),document.activeElement?.click();break;case"Escape":e.preventDefault(),this.closeDropdown(),this.container?.querySelector(".current-language-btn")?.focus();break;case"Home":e.preventDefault(),t[0]?.focus();break;case"End":e.preventDefault(),t[t.length-1]?.focus();break}}async selectLanguage(e){if(e===this.currentLanguage){this.closeDropdown();return}try{N.trackUserInteraction({event:"settings_change",element:"language_selector",value:e}),await Y.changeLanguage(e),this.currentLanguage=e;const t=this.container?.querySelector(".current-language-btn");this.updateCurrentLanguageButton(t),this.createDropdownItems(),this.closeDropdown(),this.config.onLanguageChange?.(e),document.dispatchEvent(new CustomEvent("language-changed",{detail:{language:e,config:B[e]}}))}catch(t){console.error("Failed to change language:",t)}}toggleDropdown(){this.isOpen?this.closeDropdown():this.openDropdown()}openDropdown(){if(!this.dropdown||!this.container)return;this.isOpen=!0,this.dropdown.classList.add("open"),this.container.classList.add("open"),this.container.querySelector(".current-language-btn")?.setAttribute("aria-expanded","true")}closeDropdown(){if(!this.dropdown||!this.container)return;this.isOpen=!1,this.dropdown.classList.remove("open"),this.container.classList.remove("open"),this.container.querySelector(".current-language-btn")?.setAttribute("aria-expanded","false")}focusFirstItem(){this.dropdown?.querySelector(".language-item")?.focus()}addStyles(){const e="language-selector-styles";if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent=`
      .language-selector {
        position: fixed;
        z-index: 1000;
        font-family: 'Press Start 2P', monospace;
      }

      .language-selector.top-left {
        top: 1rem;
        left: 1rem;
      }

      .language-selector.top-right {
        top: 1rem;
        right: 1rem;
      }

      .language-selector.bottom-left {
        bottom: 1rem;
        left: 1rem;
      }

      .language-selector.bottom-right {
        bottom: 1rem;
        right: 1rem;
      }

      .language-selector.center {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .current-language-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        background: rgba(0, 0, 0, 0.8);
        border: 2px solid #FF6A00;
        border-radius: 6px;
        color: white;
        font-family: inherit;
        font-size: 0.6rem;
        cursor: pointer;
        transition: all 0.2s ease;
        backdrop-filter: blur(10px);
      }

      .current-language-btn:hover {
        background: rgba(255, 106, 0, 0.1);
        border-color: #FF8A20;
        transform: translateY(-1px);
      }

      .current-language-btn:focus {
        outline: 2px solid #FF6A00;
        outline-offset: 2px;
      }

      .language-selector.compact .current-language-btn {
        padding: 0.4rem;
        min-width: 2.5rem;
        justify-content: center;
      }

      .language-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        margin-top: 0.5rem;
        background: rgba(0, 0, 0, 0.95);
        border: 2px solid #FF6A00;
        border-radius: 6px;
        backdrop-filter: blur(10px);
        min-width: 200px;
        max-height: 300px;
        overflow-y: auto;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
      }

      .language-dropdown.open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .language-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        width: 100%;
        padding: 0.75rem 1rem;
        background: transparent;
        border: none;
        color: white;
        font-family: inherit;
        font-size: 0.5rem;
        text-align: left;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
      }

      .language-item:hover {
        background: rgba(255, 106, 0, 0.2);
      }

      .language-item:focus {
        background: rgba(255, 106, 0, 0.3);
        outline: none;
      }

      .language-item.active {
        background: rgba(255, 106, 0, 0.1);
        color: #FF6A00;
      }

      .language-item .flag {
        font-size: 0.8rem;
        min-width: 1.2rem;
      }

      .language-item .name {
        flex: 1;
      }

      .language-item .checkmark {
        color: #4CAF50;
        font-size: 0.6rem;
      }

      .current-language-btn .chevron {
        transition: transform 0.2s ease;
        font-size: 0.4rem;
      }

      .language-selector.open .current-language-btn .chevron {
        transform: rotate(180deg);
      }

      /* RTL support */
      .rtl .language-selector.top-right {
        right: auto;
        left: 1rem;
      }

      .rtl .language-selector.top-left {
        left: auto;
        right: 1rem;
      }

      .rtl .language-dropdown {
        right: auto;
        left: 0;
      }

      .rtl .language-item {
        text-align: right;
        flex-direction: row-reverse;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .language-selector {
          position: fixed;
        }
        
        .language-selector.top-right {
          top: 0.5rem;
          right: 0.5rem;
        }

        .current-language-btn {
          font-size: 0.5rem;
          padding: 0.4rem 0.6rem;
        }

        .language-dropdown {
          min-width: 180px;
          max-height: 250px;
        }

        .language-item {
          padding: 0.6rem 0.8rem;
          font-size: 0.45rem;
        }
      }

      /* Dark/Light theme support */
      @media (prefers-color-scheme: light) {
        .current-language-btn {
          background: rgba(255, 255, 255, 0.9);
          color: #333;
        }

        .language-dropdown {
          background: rgba(255, 255, 255, 0.95);
        }

        .language-item {
          color: #333;
        }

        .language-item:hover {
          background: rgba(255, 106, 0, 0.1);
        }
      }

      /* Animation for dropdown scroll */
      .language-dropdown::-webkit-scrollbar {
        width: 4px;
      }

      .language-dropdown::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
      }

      .language-dropdown::-webkit-scrollbar-thumb {
        background: #FF6A00;
        border-radius: 2px;
      }

      .language-dropdown::-webkit-scrollbar-thumb:hover {
        background: #FF8A20;
      }
    `,document.head.appendChild(t)}updateConfig(e){if(this.config={...this.config,...e},this.container){this.container.className=this.container.className.replace(/(top-left|top-right|bottom-left|bottom-right|center)/g,""),this.container.className+=` ${this.config.position} ${this.config.compact?"compact":""}`;const t=this.container.querySelector(".current-language-btn");this.updateCurrentLanguageButton(t),this.createDropdownItems()}}show(){this.container&&(this.container.style.display="block")}hide(){this.container&&(this.container.style.display="none"),this.closeDropdown()}destroy(){this.container&&(this.container.remove(),this.container=null,this.dropdown=null)}getCurrentLanguage(){return this.currentLanguage}}new As;class Es{canvas;ctx;assets=null;displayMessage={text:"",ttl:0,color:"white"};collisionProcessed=!1;roundJustStarted=!0;animationId=null;lastFrameTime=0;performanceMetrics={fps:0,frameTime:0,renderTime:0,updateTime:0};gameStore=ce.getState();gameActions=an();constructor(e){const t=document.getElementById(e);if(!t)throw new Error(`Canvas with id '${e}' not found`);this.canvas=t;const n=t.getContext("2d");if(!n)throw new Error("Failed to get 2D context");this.ctx=n,this.setupCanvas(),this.setupEventListeners(),ce.subscribe(s=>{this.gameStore=s})}async init(){try{this.showLoadingScreen(),this.assets=await mn(),await V.preloadAll(),await Y.initialize(),await N.initialize(),N.trackCustomEvent("game_initialized",{user_agent:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,language:Y.getCurrentLanguage()}),this.gameActions.setGameState("menu"),this.startGameLoop(),console.log("Game engine initialized successfully")}catch(e){console.error("Failed to initialize game engine:",e),this.showErrorScreen("Failed to load game assets. Please refresh and try again."),N.trackCustomEvent("game_initialization_failed",{error:e instanceof Error?e.message:String(e)})}}setupCanvas(){this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas())}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.gameStore.gameState==="playing"&&z.reset(this.canvas.height)}setupEventListeners(){document.addEventListener("keydown",e=>this.handleKeyDown(e)),this.canvas.addEventListener("click",e=>this.handleClick(e)),this.canvas.addEventListener("touchstart",e=>this.handleTouch(e)),document.addEventListener("visibilitychange",()=>this.handleVisibilityChange()),this.canvas.addEventListener("contextmenu",e=>e.preventDefault())}handleKeyDown(e){const{code:t}=e;switch(t){case"Space":case"ArrowUp":this.gameStore.gameState==="playing"&&this.handleJump(),e.preventDefault();break;case"KeyP":this.gameStore.gameState==="playing"?this.gameActions.setGameState("paused"):this.gameStore.gameState==="paused"&&this.gameActions.setGameState("playing");break;case"KeyM":V.toggleMute();break;case"Escape":this.gameStore.gameState==="playing"&&this.gameActions.setGameState("paused");break}}handleClick(e){const t=this.canvas.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top;switch(this.gameStore.gameState){case"gameOver":this.handleGameOverClick(n,s);break;case"menu":this.handleMenuClick(n,s);break;case"playing":this.handleJump();break}}handleTouch(e){e.preventDefault(),this.gameStore.gameState==="playing"&&this.handleJump()}handleVisibilityChange(){document.hidden&&this.gameStore.gameState==="playing"&&this.gameActions.setGameState("paused")}handleJump(){this.roundJustStarted&&(z.gravity=.5,this.roundJustStarted=!1),z.jump(),ln()}handleGameOverClick(e,t){const n=this.canvas.width/2-100,s=this.canvas.height/2+20;e>=n&&e<=n+200&&t>=s&&t<=s+50&&this.restartGame()}handleMenuClick(e,t){const n=this.canvas.width/2-100,s=this.canvas.height/2+20;e>=n&&e<=n+200&&t>=s&&t<=s+50&&(N.trackUserInteraction({event:"menu_click",element:"start_game_button"}),this.startGame())}async startGame(){try{this.gameActions.setGameState("playing"),this.gameActions.resetScore(),this.gameStore.selectedCategoryId||this.gameActions.setSelectedCategory(9),N.trackGameplayEvent({event:"game_start",category:this.gameStore.selectedCategoryId?.toString()||"9",difficulty:"normal"}),hn(),await this.resetForNewRound()}catch(e){console.error("Failed to start game:",e),this.showTemporaryMessage("Failed to start game",120,"red")}}restartGame(){this.gameActions.resetGame(),je(),He(),this.startGame()}async resetForNewRound(){z.reset(this.canvas.height);try{await Xt.fetchQuestion(this.gameStore.selectedCategoryId||9),qt(this.canvas,ae),this.collisionProcessed=!1,this.roundJustStarted=!0}catch(e){console.error("Failed to reset for new round:",e),this.showTemporaryMessage("Failed to load question",120,"red")}}gameOver(){ze(),un(),gn(z.x,z.y),N.trackGameplayEvent({event:"game_end",score:this.gameStore.score.value,category:this.gameStore.selectedCategoryId?.toString()||"9",difficulty:"normal",duration:Date.now()-Date.now()}),this.gameActions.setGameState("gameOver")}showTemporaryMessage(e,t,n="white"){this.displayMessage={text:e,ttl:t,color:n}}startGameLoop(){const e=t=>{const n=t-this.lastFrameTime;this.lastFrameTime=t;const s=performance.now();this.update(n);const i=performance.now(),a=performance.now();this.render();const o=performance.now();this.performanceMetrics={fps:1e3/n,frameTime:n,updateTime:i-s,renderTime:o-a},Math.random()<.01&&N.trackPerformance({event:"performance_metric",metric:"fps",value:this.performanceMetrics.fps,context:this.gameStore.gameState}),this.animationId=requestAnimationFrame(e)};this.animationId=requestAnimationFrame(e)}update(e){if(this.assets){switch(this.gameStore.gameState){case"playing":this.updateGameplay();break;case"paused":break;default:Be();break}this.displayMessage.ttl>0&&this.displayMessage.ttl--}}updateGameplay(){if(z.update(),Vt(this.gameStore.gameSpeed),Be(),!this.collisionProcessed){const e=Gt(z,this.canvas);e&&this.handleCollision(e)}}handleCollision(e){switch(this.collisionProcessed=!0,e){case"correct":this.handleCorrectAnswer();break;case"incorrect":this.handleIncorrectAnswer();break;case"wall":case"ceiling":case"floor":this.handleWallCollision();break}}handleCorrectAnswer(){cn(),this.gameActions.incrementScore(),this.gameActions.addExperience(10),this.showTemporaryMessage(C("game.correct"),60,"green"),N.trackGameplayEvent({event:"question_answered",correct:!0,category:this.gameStore.selectedCategoryId?.toString()||"9",questionType:"multiple"});const e=Math.min(this.gameStore.gameSpeed+.2,12);this.gameActions.setGameSpeed(e),setTimeout(()=>{this.resetForNewRound().catch(console.error)},500)}handleIncorrectAnswer(){this.showTemporaryMessage(C("game.incorrect"),60,"red"),this.gameActions.decrementLives(),N.trackGameplayEvent({event:"question_answered",correct:!1,category:this.gameStore.selectedCategoryId?.toString()||"9",questionType:"multiple"}),this.gameStore.lives>0&&setTimeout(()=>{this.resetForNewRound().catch(console.error)},500)}handleWallCollision(){this.gameStore.hasShield?(this.gameActions.setShield(!1),this.showTemporaryMessage(C("game.shieldUsed"),60,"blue"),setTimeout(()=>{this.collisionProcessed=!1},100)):this.gameOver()}render(){if(!this.assets){this.showLoadingScreen();return}switch(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.assets.background,0,0,this.canvas.width,this.canvas.height),this.gameStore.gameState){case"menu":this.renderMenu();break;case"playing":case"paused":this.renderGameplay(),this.gameStore.gameState==="paused"&&this.renderPauseOverlay();break;case"gameOver":this.renderGameplay(),this.renderGameOverScreen();break}pn(this.ctx)}renderMenu(){this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font='40px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText(C("game.title"),this.canvas.width/2,this.canvas.height/2-80),this.ctx.fillStyle="#FF6A00",this.ctx.fillRect(this.canvas.width/2-100,this.canvas.height/2+20,200,50),this.ctx.font='20px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.fillText(C("game.startGame"),this.canvas.width/2,this.canvas.height/2+55),this.renderStats()}renderGameplay(){z.draw(this.ctx,this.assets.character),Kt(this.ctx,this.assets.obstacle),this.renderUI()}renderUI(){this.ctx.font='20px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="left",this.ctx.fillText(`${C("game.score")}: ${this.gameStore.score.value}`,10,30),this.ctx.fillText(`${C("game.lives")}: ${this.gameStore.lives}`,10,60),this.ctx.fillText(`${C("game.level")}: ${this.gameStore.level}`,10,90),this.gameStore.hasShield&&(this.ctx.fillStyle="blue",this.ctx.fillText("🛡️",10,120)),ae.display&&this.renderQuestion(),this.displayMessage.ttl>0&&this.renderMessage(this.displayMessage)}renderQuestion(){this.ctx.font='18px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center";const e=this.canvas.width/2;this.ctx.fillText(ae.text,e,50)}renderMessage(e){this.ctx.font='30px "Press Start 2P"',this.ctx.fillStyle=e.color,this.ctx.textAlign="center";const t=this.ctx.measureText(e.text).width;this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.fillRect(this.canvas.width/2-t/2-20,this.canvas.height/2-40,t+40,70),this.ctx.fillStyle=e.color,this.ctx.fillText(e.text,this.canvas.width/2,this.canvas.height/2+10)}renderGameOverScreen(){this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font='40px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText(C("game.gameOver"),this.canvas.width/2,this.canvas.height/2-80),this.ctx.font='20px "Press Start 2P"',this.ctx.fillText(`${C("game.score")}: ${this.gameStore.score.value}`,this.canvas.width/2,this.canvas.height/2-20),this.ctx.fillStyle="#FF6A00",this.ctx.fillRect(this.canvas.width/2-100,this.canvas.height/2+20,200,50),this.ctx.fillStyle="white",this.ctx.fillText(C("game.playAgain"),this.canvas.width/2,this.canvas.height/2+55)}renderPauseOverlay(){this.ctx.fillStyle="rgba(0, 0, 0, 0.5)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font='40px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText(C("game.paused"),this.canvas.width/2,this.canvas.height/2),this.ctx.font='16px "Press Start 2P"',this.ctx.fillText(C("game.pressToContinue"),this.canvas.width/2,this.canvas.height/2+50)}renderStats(){const e=this.gameStore.statistics,t=this.canvas.height-100;this.ctx.font='12px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText(`Best Score: ${e.bestScore}`,this.canvas.width/2,t),this.ctx.fillText(`Games Played: ${e.totalGamesPlayed}`,this.canvas.width/2,t+20)}renderDebugInfo(){const e=this.performanceMetrics;this.ctx.font="12px monospace",this.ctx.fillStyle="yellow",this.ctx.textAlign="left",this.ctx.fillText(`FPS: ${Math.round(e.fps)}`,10,this.canvas.height-60),this.ctx.fillText(`Frame: ${e.frameTime.toFixed(1)}ms`,10,this.canvas.height-45),this.ctx.fillText(`Update: ${e.updateTime.toFixed(1)}ms`,10,this.canvas.height-30),this.ctx.fillText(`Render: ${e.renderTime.toFixed(1)}ms`,10,this.canvas.height-15)}showLoadingScreen(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font='20px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText(C("common.loading"),this.canvas.width/2,this.canvas.height/2)}showErrorScreen(e){this.ctx.fillStyle="darkred",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font='16px "Press Start 2P"',this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText(C("common.error"),this.canvas.width/2,this.canvas.height/2-20),this.ctx.fillText(e,this.canvas.width/2,this.canvas.height/2+20)}destroy(){this.animationId&&cancelAnimationFrame(this.animationId),ze(),je(),He(),window.removeEventListener("resize",this.resizeCanvas),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}let ke=null;async function mt(){try{ke=new Es("gameCanvas"),await ke.init()}catch(r){console.error("Failed to initialize game:",r)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",mt):mt().catch(console.error);window.addEventListener("beforeunload",()=>{ke&&ke.destroy()});
//# sourceMappingURL=index-dPSvDR72.js.map
