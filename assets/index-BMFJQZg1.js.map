{"version":3,"file":"index-BMFJQZg1.js","sources":["../../src/character.js","../../src/utils.js","../../src/obstacles.js","../../src/questions.js","../../src/powerups.js","../../src/ui.js","../../src/audio.js","../../src/particles.js","../../src/assets.js","../../src/main.js"],"sourcesContent":["export const character = {\n    x: 150, // Fixed horizontal position\n    y: 0, // Will be initialized later\n    size: 60,\n    velocity_y: 0,\n    gravity: 0.5,\n    jump_strength: -10,\n    jump: function () {\n        this.velocity_y = this.jump_strength;\n    },\n    draw: function (ctx, characterImage) {\n        if (!characterImage) return;\n\n        ctx.save();\n        ctx.translate(this.x, this.y);\n        // Rotate based on vertical velocity for a more dynamic feel\n        const angle = Math.atan2(this.velocity_y, 20) * 0.3;\n        ctx.rotate(angle);\n\n        // Draw the entire GIF. The browser handles the animation.\n        ctx.drawImage(characterImage, -this.size / 2, -this.size / 2, this.size, this.size);\n\n        ctx.restore();\n    },\n    update: function () {\n        this.velocity_y += this.gravity;\n        this.y += this.velocity_y;\n    }\n};\n","export function wrapText(context, text, x, y, maxWidth, lineHeight) {\n    const words = text.split(' ');\n    let line = '';\n    let currentY = y;\n\n    // A simple approach to center the block of text vertically\n    const lines = [];\n    words.forEach(word => {\n        const testLine = line + word + ' ';\n        if (context.measureText(testLine).width > maxWidth && line.length > 0) {\n            lines.push(line);\n            line = word + ' ';\n        } else {\n            line = testLine;\n        }\n    });\n    lines.push(line);\n\n    // Adjust starting Y to center the text block\n    currentY -= (lines.length - 1) * lineHeight / 2;\n\n    lines.forEach((line, index) => {\n        context.fillText(line.trim(), x, currentY + index * lineHeight);\n    });\n}\n","import { character } from './character.js';\nimport { wrapText } from './utils.js';\n\nexport const obstacles = []; // This will hold the wall segments\nexport const tunnels = []; // This will hold the tunnel data for collision and text rendering\n\nexport function generateWallWithTunnels(canvas, questionState) {\n    obstacles.length = 0; // Clear existing wall segments\n    tunnels.length = 0; // Clear existing tunnels\n\n    const wallWidth = 100;\n    const numberOfTunnels = 4;\n    // Ensure there's a minimum gap, e.g., 1.5 times character size\n    const tunnelHeight = Math.max(150, character.size * 1.5);\n    const wallColor = '#FF4500';\n\n    // Calculate the total height of the solid parts of the wall\n    const totalTunnelHeight = numberOfTunnels * tunnelHeight;\n    const totalWallHeight = canvas.height - totalTunnelHeight;\n\n    if (totalWallHeight < 0) {\n        console.error(\"Not enough space for tunnels. Reduce tunnel height or number of tunnels.\");\n        return;\n    }\n\n    // The height of each wall segment (5 segments for 4 tunnels)\n    const wallSegmentHeight = totalWallHeight / (numberOfTunnels + 1);\n\n    let currentY = 0;\n\n    for (let i = 0; i < numberOfTunnels + 1; i++) {\n        // Add wall segment\n        obstacles.push({\n            x: canvas.width,\n            y: currentY,\n            width: wallWidth,\n            height: wallSegmentHeight,\n            isWall: true,\n            draw: function (ctx, wallImage) { // wallImage passed as argument\n                ctx.fillStyle = wallColor;\n                ctx.fillRect(this.x, this.y, this.width, this.height);\n                // The wallImage is not suitable for the new design, so we don't draw it.\n                // If we wanted to use it, we would do it here.\n            },\n            update: function (gameSpeed) {\n                this.x -= gameSpeed;\n            }\n        });\n\n        // Add tunnel after the segment (except for the last one)\n        if (i < numberOfTunnels) {\n            const tunnelY = currentY + wallSegmentHeight;\n            tunnels.push({\n                x: canvas.width,\n                y: tunnelY,\n                width: wallWidth,\n                height: tunnelHeight,\n                isCorrect: i === questionState.correctAnswer,\n                answerText: questionState.answers[i],\n                draw: function (ctx) {\n                    // Tunnels are empty space, but we draw the answer text in them.\n                    ctx.fillStyle = \"white\";\n                    ctx.font = \"14px 'Press Start 2P'\";\n                    ctx.textAlign = \"center\";\n\n                    const maxWidth = this.width - 10; // Padding\n                    const lineHeight = 18;\n                    const x = this.x + this.width / 2;\n                    const y = this.y + this.height / 2;\n\n                    wrapText(ctx, this.answerText, x, y, maxWidth, lineHeight);\n\n                    ctx.textAlign = \"left\"; // Reset alignment\n                },\n                update: function (gameSpeed) {\n                    this.x -= gameSpeed;\n                }\n            });\n            currentY += wallSegmentHeight + tunnelHeight;\n        }\n    }\n}\n\nexport function checkCollisions(character, canvas) {\n    // 1. Check for floor and ceiling collisions\n    if (character.y - character.size / 2 <= 0) {\n        return 'ceiling';\n    }\n    if (character.y + character.size / 2 >= canvas.height) {\n        return 'floor';\n    }\n\n    // Only perform wall/tunnel collision checks if there are obstacles\n    if (obstacles.length === 0) {\n        return null;\n    }\n\n    const wallX = obstacles[0].x;\n    const wallWidth = obstacles[0].width;\n    const charRight = character.x + character.size / 2;\n    const charLeft = character.x - character.size / 2;\n\n    // Check for collision only when the character is horizontally aligned with the wall\n    if (charRight < wallX || charLeft > wallX + wallWidth) {\n        return null;\n    }\n\n    // 2. Check for wall collision (with solid parts)\n    for (const obstacle of obstacles) {\n        if (\n            charRight > obstacle.x &&\n            charLeft < obstacle.x + obstacle.width &&\n            character.y + character.size / 2 > obstacle.y &&\n            character.y - character.size / 2 < obstacle.y + obstacle.height\n        ) {\n            return 'wall'; // Collision with a solid wall segment\n        }\n    }\n\n    // 3. If no wall collision, it must be in a tunnel. Determine which one.\n    // This code runs only if the character is horizontally overlapping the wall structure.\n    for (const tunnel of tunnels) {\n        if (\n            character.y >= tunnel.y &&\n            character.y <= tunnel.y + tunnel.height\n        ) {\n            // The character is vertically aligned with this tunnel.\n            // Since we already checked for wall collision, passing through here is a success.\n            return tunnel.isCorrect ? 'correct' : 'incorrect';\n        }\n    }\n\n    // This part should ideally not be reached if the character is within the wall's x-span,\n    // but as a fallback, we can consider it a wall hit.\n    return 'wall';\n}\n","export const questionState = {\n    text: \"\",\n    correctAnswer: null,\n    answers: [],\n    display: false,\n};\n\nlet categories = [];\n\n// Utility to decode HTML entities\nfunction decodeHtml(html) {\n    const txt = document.createElement(\"textarea\");\n    txt.innerHTML = html;\n    return txt.value;\n}\n\n// Shuffles array in place and returns it\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n}\n\nfunction transformQuestion(apiQuestion) {\n    const incorrectAnswers = apiQuestion.incorrect_answers.map(answer => decodeHtml(answer));\n    const correctAnswer = decodeHtml(apiQuestion.correct_answer);\n\n    const allAnswers = shuffleArray([...incorrectAnswers, correctAnswer]);\n    const correctIndex = allAnswers.indexOf(correctAnswer);\n\n    return {\n        question: decodeHtml(apiQuestion.question),\n        answers: allAnswers,\n        correct_answer: correctIndex,\n    };\n}\n\nexport async function loadCategories() {\n    try {\n        const response = await fetch('https://opentdb.com/api_category.php');\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        categories = data.trivia_categories;\n        return categories;\n    } catch (error) {\n        console.error(\"Error loading categories:\", error);\n        return []; // Return empty array on error\n    }\n}\n\nexport async function fetchQuestion(categoryId) {\n    try {\n        const response = await fetch(`https://opentdb.com/api.php?amount=1&category=${categoryId}&type=multiple`);\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n\n        if (data.response_code !== 0) {\n            throw new Error(`API returned response code: ${data.response_code}`);\n        }\n\n        const transformed = transformQuestion(data.results[0]);\n\n        questionState.text = transformed.question;\n        questionState.correctAnswer = transformed.correct_answer;\n        questionState.answers = transformed.answers;\n        questionState.display = true;\n\n    } catch (error) {\n        console.error(\"Error fetching question:\", error);\n        // Display an error message on the canvas\n        questionState.text = \"Error loading question. Please try again.\";\n        questionState.display = true;\n        questionState.answers = [];\n    }\n}\n","export const activePowerups = [];\n\nexport const shieldImage = new Image();\nshieldImage.src = 'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTIgMjEuNzVsLTguNzUtMy43N3YtOC4xM2MwLTMuNTUgMi4yOS02LjggNS42Mi04LjM4bDIuMjUtMS4wMWwxLjYyLTAuNzNsMS4yNi0wLjU2bDEuMjUgMC41NmwxLjYyIDAuNzNsMi4yNSAxLjAxbDUuNjIgOC4zOHY4LjEzbC04Ljc1IDMuNzdtMCAwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggZD0ibTEyIDIxLjc1bC04Ljc1LTMuNzd2LTguMTNjMC0zLjTUDIuMjktNi44IDUuNjItOC4zOGwyLjI1LTEuMDFsMS42Mi0wLjczbDQuMTMgMS44NWw1LjYyIDguMzh2OC4xM2wtOC43NSAzLjc3bTAgMCIgZmlsbD0iIzQxN2VmNCIvPjwvc3ZnPg==';\n\nconst slowmoImage = new Image();\nslowmoImage.src = 'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMC41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggZD0iTTEyIDYuNXY1LjVoMy45IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=';\n\n\nexport function spawnPowerup(canvas) {\n    const powerupTypes = ['shield', 'slowmo'];\n    const type = powerupTypes[Math.floor(Math.random() * powerupTypes.length)];\n\n    const powerup = {\n        x: canvas.width,\n        y: Math.random() * (canvas.height - 100) + 50, // Avoid spawning too close to edges\n        size: 40,\n        type: type,\n    };\n    activePowerups.push(powerup);\n}\n\nexport function updatePowerups(gameSpeed) {\n    for (let i = activePowerups.length - 1; i >= 0; i--) {\n        const powerup = activePowerups[i];\n        powerup.x -= gameSpeed;\n\n        // Remove power-up if it goes off-screen\n        if (powerup.x + powerup.size < 0) {\n            activePowerups.splice(i, 1);\n        }\n    }\n}\n\nexport function drawPowerups(ctx) {\n    activePowerups.forEach(powerup => {\n        if (powerup.type === 'shield') {\n            ctx.drawImage(shieldImage, powerup.x, powerup.y, powerup.size, powerup.size);\n        } else if (powerup.type === 'slowmo') {\n            ctx.drawImage(slowmoImage, powerup.x, powerup.y, powerup.size, powerup.size);\n        }\n    });\n}\n","import { shieldImage } from './powerups.js';\n\nexport function setCanvasSize(canvas) {\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n}\n\nexport function drawStartScreen(ctx, canvas) {\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.font = '40px \"Press Start 2P\"';\n    ctx.fillStyle = 'white';\n    ctx.textAlign = 'center';\n    ctx.fillText('SprintSolve', canvas.width / 2, canvas.height / 2 - 80);\n\n    ctx.fillStyle = '#FF6A00';\n    ctx.fillRect(canvas.width / 2 - 100, canvas.height / 2 + 20, 200, 50);\n    ctx.font = '20px \"Press Start 2P\"';\n    ctx.fillStyle = 'white';\n    ctx.fillText('Start Game', canvas.width / 2, canvas.height / 2 + 55);\n}\n\nexport function drawGameOverScreen(ctx, canvas, score) {\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    ctx.font = '40px \"Press Start 2P\"';\n    ctx.fillStyle = 'white';\n    ctx.textAlign = 'center';\n    ctx.fillText('Game Over', canvas.width / 2, canvas.height / 2 - 80);\n\n    ctx.font = '20px \"Press Start 2P\"';\n    ctx.fillText(`Pontszám: ${score.value}`, canvas.width / 2, canvas.height / 2 - 20);\n\n    // \"Play Again\" gomb\n    ctx.fillStyle = '#FF6A00';\n    ctx.fillRect(canvas.width / 2 - 100, canvas.height / 2 + 20, 200, 50);\n    ctx.font = '20px \"Press Start 2P\"';\n    ctx.fillStyle = 'white';\n    ctx.fillText('Play Again', canvas.width / 2, canvas.height / 2 + 55);\n}\n\nexport function updateScore(ctx, score) {\n    ctx.font = \"20px Arial\";\n    ctx.fillStyle = \"black\";\n    ctx.fillText(\"Pontszám: \" + score.value, 10, 60);\n}\n\nimport { wrapText } from './utils.js';\n\nexport function showQuestion(ctx, question, canvas) {\n    ctx.font = \"20px 'Press Start 2P'\"; // Slightly smaller font for better wrapping\n    ctx.fillStyle = \"white\";\n    ctx.textAlign = 'center';\n\n    const maxWidth = canvas.width * 0.8; // Use 80% of canvas width for the question\n    const lineHeight = 25;\n    const x = canvas.width / 2;\n    const y = 50;\n\n    wrapText(ctx, question.text, x, y, maxWidth, lineHeight);\n\n    ctx.textAlign = 'left'; // Reset alignment\n}\n\nexport function drawMessage(ctx, canvas, text, color = 'white') {\n    ctx.font = '30px \"Press Start 2P\"';\n    ctx.fillStyle = color;\n    ctx.textAlign = 'center';\n    // Draw a semi-transparent background for the message to make it pop\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    const textWidth = ctx.measureText(text).width;\n    ctx.fillRect(canvas.width / 2 - textWidth / 2 - 20, canvas.height / 2 - 40, textWidth + 40, 70);\n\n    // Draw the actual text\n    ctx.fillStyle = color;\n    ctx.fillText(text, canvas.width / 2, canvas.height / 2 + 10);\n    ctx.textAlign = 'left'; // Reset alignment\n}\n\nexport function drawShieldStatus(ctx) {\n    ctx.drawImage(shieldImage, 10, 90, 40, 40);\n}\n\nexport function drawCategorySelectScreen(ctx, canvas, categories) {\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.font = '20px \"Press Start 2P\"'; // Smaller font for longer text\n    ctx.fillStyle = 'white';\n    ctx.textAlign = 'center';\n    ctx.fillText('Select a Category', canvas.width / 2, canvas.height / 2 - 180);\n\n    if (categories.length === 0) {\n        ctx.font = '16px \"Press Start 2P\"';\n        ctx.fillText('Loading categories...', canvas.width / 2, canvas.height / 2);\n        return;\n    }\n\n    const buttonHeight = 40;\n    const buttonPadding = 15;\n    // Simple pagination might be needed for many categories, but for now, we'll just display the first few.\n    const displayCategories = categories.slice(0, 5);\n    const totalHeight = (buttonHeight + buttonPadding) * displayCategories.length - buttonPadding;\n    let startY = (canvas.height - totalHeight) / 2;\n\n    displayCategories.forEach((category, index) => {\n        const y = startY + index * (buttonHeight + buttonPadding);\n        ctx.fillStyle = '#FF6A00';\n        ctx.fillRect(canvas.width / 2 - 200, y, 400, buttonHeight);\n        ctx.font = '14px \"Press Start 2P\"';\n        ctx.fillStyle = 'white';\n        ctx.fillText(category.name, canvas.width / 2, y + 25);\n    });\n}\n","// Using free, public domain sounds from freesound.org for placeholder purposes.\n// It is recommended to host your own assets.\n\nconst sounds = {\n    jump: new Audio('https://freesound.org/data/previews/135/135936_2434988-lq.mp3'),\n    score: new Audio('https://freesound.org/data/previews/270/270319_5123851-lq.mp3'),\n    gameOver: new Audio('https://freesound.org/data/previews/219/219244_4082829-lq.mp3'),\n    background: new Audio('https://freesound.org/data/previews/396/396740_5218259-lq.mp3'),\n};\n\n// Set properties for background music\nsounds.background.loop = true;\nsounds.background.volume = 0.3;\n\nexport function playJumpSound() {\n    sounds.jump.currentTime = 0;\n    sounds.jump.play();\n}\n\nexport function playScoreSound() {\n    sounds.score.currentTime = 0;\n    sounds.score.play();\n}\n\nexport function playGameOverSound() {\n    sounds.gameOver.currentTime = 0;\n    sounds.gameOver.play();\n}\n\nexport function playBackgroundMusic() {\n    sounds.background.play();\n}\n\nexport function stopBackgroundMusic() {\n    sounds.background.pause();\n    sounds.background.currentTime = 0;\n}\n","export const particles = [];\n\nclass Particle {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this.size = Math.random() * 5 + 2;\n        this.speedX = Math.random() * 6 - 3;\n        this.speedY = Math.random() * 6 - 3;\n        this.color = `hsl(${Math.random() * 60 + 0}, 100%, 50%)`; // Red-orange-yellow palette\n        this.ttl = Math.random() * 100 + 50; // Time to live\n    }\n\n    update() {\n        this.x += this.speedX;\n        this.y += this.speedY;\n        this.ttl--;\n    }\n\n    draw(ctx) {\n        ctx.fillStyle = this.color;\n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n        ctx.fill();\n    }\n}\n\nexport function createExplosion(x, y) {\n    const particleCount = 50;\n    for (let i = 0; i < particleCount; i++) {\n        particles.push(new Particle(x, y));\n    }\n}\n\nexport function updateParticles() {\n    for (let i = particles.length - 1; i >= 0; i--) {\n        particles[i].update();\n        if (particles[i].ttl <= 0) {\n            particles.splice(i, 1);\n        }\n    }\n}\n\nexport function drawParticles(ctx) {\n    particles.forEach(p => p.draw(ctx));\n}\n","function loadImage(src) {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.src = src;\n    });\n}\n\nexport async function loadGameAssets() {\n    const [background, character, obstacle] = await Promise.all([\n        loadImage('./background.png'),\n        loadImage('./character.gif'),\n        loadImage('./obstacle.png')\n    ]);\n\n    return { background, character, obstacle };\n}\n","import { character } from './character.js';\nimport { obstacles, tunnels, checkCollisions, generateWallWithTunnels } from './obstacles.js';\nimport { questionState, fetchQuestion } from './questions.js';\nimport { setCanvasSize, drawGameOverScreen, updateScore, showQuestion, drawMessage, drawShieldStatus } from './ui.js';\nimport { playJumpSound, playScoreSound, playGameOverSound, playBackgroundMusic, stopBackgroundMusic } from './audio.js';\nimport { activePowerups, spawnPowerup, updatePowerups, drawPowerups } from './powerups.js';\nimport { particles, createExplosion, updateParticles, drawParticles } from './particles.js';\nimport { loadGameAssets } from './assets.js';\n\nconst canvas = document.getElementById(\"gameCanvas\");\nconst ctx = canvas.getContext(\"2d\");\n\nlet assets;\nlet gameState = 'playing'; // Start directly in the game\nlet score = { value: 0 };\nlet gameSpeed = 4;\nconst selectedCategoryId = 9;\nlet hasShield = false;\nlet displayMessage = { text: '', ttl: 0, color: 'white' };\nlet collisionProcessed = false;\nlet roundJustStarted = true;\n\nfunction showTemporaryMessage(text, durationInFrames, color = 'white') {\n    displayMessage.text = text;\n    displayMessage.ttl = durationInFrames;\n    displayMessage.color = color;\n}\n\nfunction checkPowerupCollisions() {\n    for (let i = activePowerups.length - 1; i >= 0; i--) {\n        const powerup = activePowerups[i];\n        const dist = Math.hypot(character.x - powerup.x, character.y - powerup.y);\n        if (dist - character.size / 2 - powerup.size / 2 < 1) {\n            if (powerup.type === 'shield') hasShield = true;\n            activePowerups.splice(i, 1);\n        }\n    }\n}\n\nasync function resetForNewRound() {\n    character.y = canvas.height / 2;\n    character.velocity_y = 0;\n    character.gravity = 0;\n    await fetchQuestion(selectedCategoryId);\n    generateWallWithTunnels(canvas, questionState);\n    collisionProcessed = false;\n    roundJustStarted = true;\n}\n\nfunction restartGame() {\n    score.value = 0;\n    gameSpeed = 4;\n    hasShield = false;\n    activePowerups.length = 0;\n    particles.length = 0;\n    gameState = 'playing';\n    playBackgroundMusic();\n    resetForNewRound();\n}\n\nfunction gameOver() {\n    stopBackgroundMusic();\n    playGameOverSound();\n    createExplosion(character.x, character.y);\n    gameState = 'gameOver';\n}\n\nfunction updateGame() {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(assets.background, 0, 0, canvas.width, canvas.height);\n\n    if (gameState === 'playing') {\n        character.update();\n        character.draw(ctx, assets.character);\n\n        obstacles.forEach(obstacle => {\n            obstacle.update(gameSpeed);\n            obstacle.draw(ctx, assets.obstacle);\n        });\n        tunnels.forEach(tunnel => {\n            tunnel.update(gameSpeed);\n            tunnel.draw(ctx);\n        });\n\n        updatePowerups(gameSpeed);\n        drawPowerups(ctx);\n        checkPowerupCollisions();\n\n        if (!collisionProcessed) {\n            const collisionResult = checkCollisions(character, canvas);\n            if (collisionResult) {\n                collisionProcessed = true;\n                if (collisionResult === 'correct') {\n                    playScoreSound();\n                    score.value++;\n                    showTemporaryMessage('Helyes!', 60, 'green');\n                    if (Math.random() < 0.25) spawnPowerup(canvas);\n                    setTimeout(resetForNewRound, 500);\n                } else if (collisionResult === 'incorrect') {\n                    showTemporaryMessage('Rossz!', 60, 'red');\n                    setTimeout(resetForNewRound, 500);\n                } else if (['wall', 'ceiling', 'floor'].includes(collisionResult)) {\n                    if (hasShield) {\n                        hasShield = false;\n                        obstacles.forEach(o => o.x += 150);\n                        tunnels.forEach(t => t.x += 150);\n                        collisionProcessed = false;\n                    } else {\n                        gameOver();\n                    }\n                }\n            }\n        }\n\n        if (obstacles.length > 0 && obstacles[0].x < -obstacles[0].width) {\n            showTemporaryMessage('Rossz!', 60, 'red');\n            resetForNewRound();\n        }\n\n        if (questionState.display) showQuestion(ctx, questionState, canvas);\n        updateScore(ctx, score);\n        if (hasShield) drawShieldStatus(ctx);\n        if (displayMessage.ttl > 0) {\n            drawMessage(ctx, canvas, displayMessage.text, displayMessage.color);\n            displayMessage.ttl--;\n        }\n    } else if (gameState === 'gameOver') {\n        drawGameOverScreen(ctx, canvas, score);\n    }\n\n    updateParticles();\n    drawParticles(ctx);\n\n    requestAnimationFrame(updateGame);\n}\n\ndocument.addEventListener(\"keydown\", (event) => {\n    if (event.code === \"Space\" && gameState === 'playing') {\n        if (roundJustStarted) {\n            character.gravity = 0.5;\n            roundJustStarted = false;\n        }\n        character.jump();\n        playJumpSound();\n    }\n});\n\ncanvas.addEventListener('click', function(event) {\n    if (gameState === 'gameOver') {\n        const rect = canvas.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n        const y = event.clientY - rect.top;\n        const buttonX = canvas.width / 2 - 100;\n        const buttonY = canvas.height / 2 + 20;\n        if (x >= buttonX && x <= buttonX + 200 && y >= buttonY && y <= buttonY + 50) {\n            restartGame();\n        }\n    }\n});\n\nasync function init() {\n    setCanvasSize(canvas);\n    window.addEventListener(\"resize\", () => setCanvasSize(canvas));\n\n    // Show a loading message\n    ctx.fillStyle = \"black\";\n    ctx.font = \"20px 'Press Start 2P'\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"Loading assets...\", canvas.width / 2, canvas.height / 2);\n\n    assets = await loadGameAssets();\n\n    playBackgroundMusic();\n    await resetForNewRound();\n    updateGame();\n}\n\ninit();\n"],"names":["character","ctx","characterImage","angle","wrapText","context","text","x","y","maxWidth","lineHeight","words","line","currentY","lines","word","testLine","index","obstacles","tunnels","generateWallWithTunnels","canvas","questionState","wallWidth","numberOfTunnels","tunnelHeight","wallColor","totalTunnelHeight","totalWallHeight","wallSegmentHeight","i","wallImage","gameSpeed","tunnelY","checkCollisions","wallX","charRight","charLeft","obstacle","tunnel","decodeHtml","html","txt","shuffleArray","array","j","transformQuestion","apiQuestion","incorrectAnswers","answer","correctAnswer","allAnswers","correctIndex","fetchQuestion","categoryId","response","data","transformed","error","activePowerups","shieldImage","slowmoImage","spawnPowerup","powerupTypes","type","powerup","updatePowerups","drawPowerups","setCanvasSize","drawGameOverScreen","score","updateScore","showQuestion","question","drawMessage","color","textWidth","drawShieldStatus","sounds","playJumpSound","playScoreSound","playGameOverSound","playBackgroundMusic","stopBackgroundMusic","particles","Particle","createExplosion","updateParticles","drawParticles","p","loadImage","src","resolve","reject","img","loadGameAssets","background","assets","gameState","selectedCategoryId","hasShield","displayMessage","collisionProcessed","roundJustStarted","showTemporaryMessage","durationInFrames","checkPowerupCollisions","resetForNewRound","restartGame","gameOver","updateGame","collisionResult","o","event","rect","buttonX","buttonY","init"],"mappings":"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"}