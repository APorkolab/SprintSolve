(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();const h={x:50,y:0,size:60,speed:3,gravity:0,frameIndex:0,frameCount:0,currentFrame:0,totalFrames:49,jump:function(){this.y-=this.speed},fall:function(){this.y+=this.gravity},draw:function(t){const e=document.getElementById("characterImage"),i=e.width/this.totalFrames;t.drawImage(e,i*this.currentFrame,0,i,e.height,this.x-this.size/2,this.y-this.size/2,this.size,this.size),this.frameCount++,this.frameCount>10&&(this.frameIndex=(this.frameIndex+1)%this.totalFrames,this.frameCount=0)},update:function(t){t.display?this.gravity=.5:this.gravity=0,this.currentFrame++,this.currentFrame>=this.totalFrames&&(this.currentFrame=0)}},b=[];function B(t,e,i){const s=e.size*3,o=20,n=t.height/2-s/2,u=t.width/2-o/2;b.length=0;const w=Math.random()<.25,p=[t.height/2-100,t.height/2+100];let S=(Math.random()*2+1)*(Math.random()<.5?1:-1);if(i.display)for(let f=0;f<i.answers.length;f++)b.push({x:u+f*o,y:n,width:o,height:t.height-n,isCorrectAnswer:f===i.correctAnswer,isMoving:w,vy:S,moveRange:p,draw:function(m){m.fillStyle=this.isMoving?"#CC0000":"#FF4500",m.fillRect(this.x,this.y,this.width,this.height)},update:function(m){this.x-=m,this.isMoving&&(this.y+=this.vy,(this.y<this.moveRange[0]||this.y>this.moveRange[1])&&(this.vy*=-1))}})}function R(t,e){for(const i of b)if(t.x+t.size/2>i.x&&t.x-t.size/2<i.x+i.width&&t.y+t.size/2>i.y)return i.isCorrectAnswer?"correct":"incorrect";return null}const a={text:"",correctAnswer:null,answers:[],display:!1};let v=[];function j(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}function Y(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}function k(t){const e=t.incorrect_answers.map(n=>j(n)),i=j(t.correct_answer),s=Y([...e,i]),o=s.indexOf(i);return{question:j(t.question),answers:s,correct_answer:o}}async function G(){try{const t=await fetch("https://opentdb.com/api_category.php");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return v=(await t.json()).trivia_categories,v}catch(t){return console.error("Error loading categories:",t),[]}}async function W(t){try{const e=await fetch(`https://opentdb.com/api.php?amount=1&category=${t}&type=multiple`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=await e.json();if(i.response_code!==0)throw new Error(`API returned response code: ${i.response_code}`);const s=k(i.results[0]);a.text=s.question,a.correctAnswer=s.correct_answer,a.answers=s.answers,a.display=!0}catch(e){console.error("Error fetching question:",e),a.text="Error loading question. Please try again.",a.display=!0,a.answers=[]}}const g=[],x=new Image;x.src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTIgMjEuNzVsLTguNzUtMy43N3YtOC4xM2MwLTMuNTUgMi4yOS02LjggNS42Mi04LjM4bDIuMjUtMS4wMWwxLjYyLTAuNzNsMS4yNi0wLjU2bDEuMjUgMC41NmwxLjYyIDAuNzNsMi4yNSAxLjAxbDUuNjIgOC4zOHY4LjEzbC04Ljc1IDMuNzdtMCAwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggZD0ibTEyIDIxLjc1bC04Ljc1LTMuNzd2LTguMTNjMC0zLjTUDIuMjktNi44IDUuNjItOC4zOGwyLjI1LTEuMDFsMS42Mi0wLjczbDQuMTMgMS44NWw1LjYyIDguMzh2OC4xM2wtOC43NSAzLjc3bTAgMCIgZmlsbD0iIzQxN2VmNCIvPjwvc3ZnPg==";const O=new Image;O.src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMC41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggZD0iTTEyIDYuNXY1LjVoMy45IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=";function q(t){const e=["shield","slowmo"],i=e[Math.floor(Math.random()*e.length)],s={x:t.width,y:Math.random()*(t.height-100)+50,size:40,type:i};g.push(s)}function J(t){for(let e=g.length-1;e>=0;e--){const i=g[e];i.x-=t,i.x+i.size<0&&g.splice(e,1)}}function U(t){g.forEach(e=>{e.type==="shield"?t.drawImage(x,e.x,e.y,e.size,e.size):e.type==="slowmo"&&t.drawImage(O,e.x,e.y,e.size,e.size)})}function E(t){t.width=window.innerWidth,t.height=window.innerHeight}function _(t,e){t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,e.width,e.height),t.font='40px "Press Start 2P"',t.fillStyle="white",t.textAlign="center",t.fillText("SprintSolve",e.width/2,e.height/2-80),t.fillStyle="#FF6A00",t.fillRect(e.width/2-100,e.height/2+20,200,50),t.font='20px "Press Start 2P"',t.fillStyle="white",t.fillText("Start Game",e.width/2,e.height/2+55)}function X(t,e,i){t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,e.width,e.height),t.font='40px "Press Start 2P"',t.fillStyle="white",t.textAlign="center",t.fillText("Game Over",e.width/2,e.height/2-80),t.font='20px "Press Start 2P"',t.fillText(`Pontszám: ${i.value}`,e.width/2,e.height/2-20),t.fillStyle="#FF6A00",t.fillRect(e.width/2-100,e.height/2+20,200,50),t.font='20px "Press Start 2P"',t.fillStyle="white",t.fillText("Play Again",e.width/2,e.height/2+55)}function $(t,e){t.font="20px Arial",t.fillStyle="black",t.fillText("Pontszám: "+e.value,10,60)}function Q(t,e){t.font="20px Arial",t.fillStyle="black",t.fillText(e.text,10,30)}function V(t,e,i){t.font='24px "Press Start 2P"',t.fillStyle="rgba(255, 0, 0, 1)",t.textAlign="center",t.fillText(i,e.width/2,e.height/2+120),t.textAlign="left"}function K(t){t.drawImage(x,10,90,40,40)}function tt(t,e,i){if(t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,e.width,e.height),t.font='20px "Press Start 2P"',t.fillStyle="white",t.textAlign="center",t.fillText("Select a Category",e.width/2,e.height/2-180),i.length===0){t.font='16px "Press Start 2P"',t.fillText("Loading categories...",e.width/2,e.height/2);return}const s=40,o=15,n=i.slice(0,5),u=(s+o)*n.length-o;let w=(e.height-u)/2;n.forEach((p,S)=>{const f=w+S*(s+o);t.fillStyle="#FF6A00",t.fillRect(e.width/2-200,f,400,s),t.font='14px "Press Start 2P"',t.fillStyle="white",t.fillText(p.name,e.width/2,f+25)})}const d={jump:new Audio("https://freesound.org/data/previews/135/135936_2434988-lq.mp3"),score:new Audio("https://freesound.org/data/previews/270/270319_5123851-lq.mp3"),gameOver:new Audio("https://freesound.org/data/previews/219/219244_4082829-lq.mp3"),background:new Audio("https://freesound.org/data/previews/396/396740_5218259-lq.mp3")};d.background.loop=!0;d.background.volume=.3;function et(){d.jump.currentTime=0,d.jump.play()}function it(){d.score.currentTime=0,d.score.play()}function ot(){d.gameOver.currentTime=0,d.gameOver.play()}function st(){d.background.play()}function nt(){d.background.pause(),d.background.currentTime=0}const y=[];class rt{constructor(e,i){this.x=e,this.y=i,this.size=Math.random()*5+2,this.speedX=Math.random()*6-3,this.speedY=Math.random()*6-3,this.color=`hsl(${Math.random()*60+0}, 100%, 50%)`,this.ttl=Math.random()*100+50}update(){this.x+=this.speedX,this.y+=this.speedY,this.ttl--}draw(e){e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill()}}function lt(t,e){for(let s=0;s<50;s++)y.push(new rt(t,e))}function at(){for(let t=y.length-1;t>=0;t--)y[t].update(),y[t].ttl<=0&&y.splice(t,1)}function ht(t){y.forEach(e=>e.draw(t))}const r=document.getElementById("gameCanvas"),l=r.getContext("2d");let c="start",z={value:0},A=2,N=[],F=null,I=!1,M=!1,T=0;const D=15*1e3;let L=D,P={text:"",ttl:0};function ct(t,e){P.text=t,P.ttl=e}function dt(){for(let t=g.length-1;t>=0;t--){const e=g[t];Math.hypot(h.x-e.x,h.y-e.y)-h.size/2-e.size/2<1&&(e.type==="shield"?I=!0:e.type==="slowmo"&&(M=!0,T=300),g.splice(t,1))}}async function C(){await W(F),B(r,h,a)}function ut(){z.value=0,A=2,I=!1,M=!1,T=0,g.length=0,y.length=0,h.y=r.height/2,a.display=!1,L=D,c="categorySelect",l.textAlign="left"}function H(){nt(),ot(),lt(h.x,h.y),c="gameOver"}function Z(){l.clearRect(0,0,r.width,r.height);const t=document.getElementById("background");if(l.drawImage(t,0,0,r.width,r.height),c==="playing"){h.update(a),h.fall(),h.draw(l),M&&(T--,T<=0&&(M=!1));const e=M?A/2:A;b.forEach(s=>{s.update(e),s.draw(l)}),J(e),U(l),dt();const i=R(h);i==="correct"?(it(),z.value++,A+=.2,ct("Speed Up!",60),Math.random()<.25&&q(r),a.display=!1,L=D,C()):i==="incorrect"&&(I?(I=!1,b.length=0,a.display=!1,C()):H()),a.display&&(L-=1e3/60,L<=0&&H(),Q(l,a)),$(l,z),I&&K(l),P.ttl>0&&(V(l,r,P.text),P.ttl--)}else c==="start"?_(l,r):c==="categorySelect"?tt(l,r,N):c==="gameOver"&&X(l,r,z);at(),ht(l),requestAnimationFrame(Z)}document.addEventListener("keydown",t=>{t.code==="Space"&&c==="playing"&&(h.jump(),et())});r.addEventListener("click",async function(t){const e=r.getBoundingClientRect(),i=t.clientX-e.left,s=t.clientY-e.top;if(c==="start"){const o=r.width/2-100,n=r.height/2+20;i>=o&&i<=o+200&&s>=n&&s<=n+50&&(c="categorySelect")}else if(c==="categorySelect"){const u=N.slice(0,5),w=55*u.length-15;let p=(r.height-w)/2;u.forEach((S,f)=>{const m=p+f*55;i>=r.width/2-200&&i<=r.width/2+200&&s>=m&&s<=m+40&&(F=S.id,c="playing",st(),C())})}else if(c==="gameOver"){const o=r.width/2-100,n=r.height/2+20;i>=o&&i<=o+200&&s>=n&&s<=n+50&&ut()}});async function ft(){E(r),h.y=r.height/2,window.addEventListener("resize",()=>E(r)),N=await G(),Z()}ft();
