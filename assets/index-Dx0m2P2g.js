(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();const c={x:150,y:0,size:60,velocity_y:0,gravity:.5,jump_strength:-10,jump:function(){this.velocity_y=this.jump_strength},draw:function(t,e){if(!e)return;t.save(),t.translate(this.x,this.y);const i=Math.atan2(this.velocity_y,20)*.3;t.rotate(i),t.drawImage(e,-this.size/2,-this.size/2,this.size,this.size),t.restore()},update:function(){this.velocity_y+=this.gravity,this.y+=this.velocity_y}};function H(t,e,i,n,s,o){const r=e.split(" ");let w="",S=n;const m=[];r.forEach(f=>{const u=w+f+" ";t.measureText(u).width>s&&w.length>0?(m.push(w),w=f+" "):w=u}),m.push(w),S-=(m.length-1)*o/2,m.forEach((f,u)=>{t.fillText(f.trim(),i,S+u*o)})}const h=[],L=[];function G(t,e){h.length=0,L.length=0;const i=100,n=4,s=Math.max(150,c.size*1.5),o="#FF4500",r=n*s,w=t.height-r;if(w<0){console.error("Not enough space for tunnels. Reduce tunnel height or number of tunnels.");return}const S=w/(n+1);let m=0;for(let f=0;f<n+1;f++)if(h.push({x:t.width,y:m,width:i,height:S,isWall:!0,draw:function(u){u.fillStyle=o,u.fillRect(this.x,this.y,this.width,this.height)},update:function(u){this.x-=u}}),f<n){const u=m+S;L.push({x:t.width,y:u,width:i,height:s,isCorrect:f===e.correctAnswer,answerText:e.answers[f],draw:function(p){p.fillStyle="white",p.font="14px 'Press Start 2P'",p.textAlign="center";const B=this.width-10,R=18,Y=this.x+this.width/2,k=this.y+this.height/2;H(p,this.answerText,Y,k,B,R),p.textAlign="left"},update:function(p){this.x-=p}}),m+=S+s}}function J(t,e){if(t.y-t.size/2<=0)return"ceiling";if(t.y+t.size/2>=e.height)return"floor";if(h.length===0)return null;const i=h[0].x,n=h[0].width,s=t.x+t.size/2,o=t.x-t.size/2;if(s<i||o>i+n)return null;for(const r of h)if(s>r.x&&o<r.x+r.width&&t.y+t.size/2>r.y&&t.y-t.size/2<r.y+r.height)return"wall";for(const r of L)if(t.y>=r.y&&t.y<=r.y+r.height)return r.isCorrect?"correct":"incorrect";return"wall"}const g={text:"",correctAnswer:null,answers:[],display:!1};function N(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}function U(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}function q(t){const e=t.incorrect_answers.map(o=>N(o)),i=N(t.correct_answer),n=U([...e,i]),s=n.indexOf(i);return{question:N(t.question),answers:n,correct_answer:s}}async function F(t){try{const e=await fetch(`https://opentdb.com/api.php?amount=1&category=${t}&type=multiple`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const i=await e.json();if(i.response_code!==0)throw new Error(`API returned response code: ${i.response_code}`);const n=q(i.results[0]);g.text=n.question,g.correctAnswer=n.correct_answer,g.answers=n.answers,g.display=!0}catch(e){console.error("Error fetching question:",e),g.text="Error loading question. Please try again.",g.display=!0,g.answers=[]}}const y=[],E=new Image;E.src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJtMTIgMjEuNzVsLTguNzUtMy43N3YtOC4xM2MwLTMuNTUgMi4yOS02LjggNS42Mi04LjM4bDIuMjUtMS4wMWwxLjYyLTAuNzNsMS4yNi0wLjU2bDEuMjUgMC41NmwxLjYyIDAuNzNsMi4yNSAxLjAxbDUuNjIgOC4zOHY4LjEzbC04Ljc1IDMuNzdtMCAwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggZD0ibTEyIDIxLjc1bC04Ljc1LTMuNzd2LTguMTNjMC0zLjTUDIuMjktNi44IDUuNjItOC4zOGwyLjI1LTEuMDFsMS42Mi0wLjczbDQuMTMgMS44NWw1LjYyIDguMzh2OC4xM2wtOC43NSAzLjc3bTAgMCIgZmlsbD0iIzQxN2VmNCIvPjwvc3ZnPg==";const W=new Image;W.src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMC41IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggZD0iTTEyIDYuNXY1LjVoMy45IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=";function X(t){const e=["shield","slowmo"],i=e[Math.floor(Math.random()*e.length)],n={x:t.width,y:Math.random()*(t.height-100)+50,size:40,type:i};y.push(n)}function $(t){for(let e=y.length-1;e>=0;e--){const i=y[e];i.x-=t,i.x+i.size<0&&y.splice(e,1)}}function Q(t){y.forEach(e=>{e.type==="shield"?t.drawImage(E,e.x,e.y,e.size,e.size):e.type==="slowmo"&&t.drawImage(W,e.x,e.y,e.size,e.size)})}function O(t){t.width=window.innerWidth,t.height=window.innerHeight}function V(t,e,i){t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,e.width,e.height),t.font='40px "Press Start 2P"',t.fillStyle="white",t.textAlign="center",t.fillText("Game Over",e.width/2,e.height/2-80),t.font='20px "Press Start 2P"',t.fillText(`Pontszám: ${i.value}`,e.width/2,e.height/2-20),t.fillStyle="#FF6A00",t.fillRect(e.width/2-100,e.height/2+20,200,50),t.font='20px "Press Start 2P"',t.fillStyle="white",t.fillText("Play Again",e.width/2,e.height/2+55)}function K(t,e){t.font="20px Arial",t.fillStyle="black",t.fillText("Pontszám: "+e.value,10,60)}function tt(t,e,i){t.font="20px 'Press Start 2P'",t.fillStyle="white",t.textAlign="center";const n=i.width*.8,s=25,o=i.width/2;H(t,e.text,o,50,n,s),t.textAlign="left"}function et(t,e,i,n="white"){t.font='30px "Press Start 2P"',t.fillStyle=n,t.textAlign="center",t.fillStyle="rgba(0, 0, 0, 0.5)";const s=t.measureText(i).width;t.fillRect(e.width/2-s/2-20,e.height/2-40,s+40,70),t.fillStyle=n,t.fillText(i,e.width/2,e.height/2+10),t.textAlign="left"}function it(t){t.drawImage(E,10,90,40,40)}const d={jump:new Audio("https://freesound.org/data/previews/135/135936_2434988-lq.mp3"),score:new Audio("https://freesound.org/data/previews/270/270319_5123851-lq.mp3"),gameOver:new Audio("https://freesound.org/data/previews/219/219244_4082829-lq.mp3"),background:new Audio("https://freesound.org/data/previews/396/396740_5218259-lq.mp3")};d.background.loop=!0;d.background.volume=.3;function nt(){d.jump.currentTime=0,d.jump.play()}function st(){d.score.currentTime=0,d.score.play()}function ot(){d.gameOver.currentTime=0,d.gameOver.play()}function Z(){d.background.play()}function rt(){d.background.pause(),d.background.currentTime=0}const I=[];class lt{constructor(e,i){this.x=e,this.y=i,this.size=Math.random()*5+2,this.speedX=Math.random()*6-3,this.speedY=Math.random()*6-3,this.color=`hsl(${Math.random()*60+0}, 100%, 50%)`,this.ttl=Math.random()*100+50}update(){this.x+=this.speedX,this.y+=this.speedY,this.ttl--}draw(e){e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fill()}}function at(t,e){for(let n=0;n<50;n++)I.push(new lt(t,e))}function ct(){for(let t=I.length-1;t>=0;t--)I[t].update(),I[t].ttl<=0&&I.splice(t,1)}function ut(t){I.forEach(e=>e.draw(t))}function v(t){return new Promise((e,i)=>{const n=new Image;n.onload=()=>e(n),n.onerror=i,n.src=t})}async function ht(){const[t,e,i]=await Promise.all([v("./background.png"),v("./character.gif"),v("./obstacle.png")]);return{background:t,character:e,obstacle:i}}const l=document.getElementById("gameCanvas"),a=l.getContext("2d");let b,z="playing";const T={value:0};let j=4;const dt=9;let x=!1;const M={text:"",ttl:0,color:"white"};let A=!1,C=!0;function D(t,e,i="white"){M.text=t,M.ttl=e,M.color=i}function ft(){for(let t=y.length-1;t>=0;t--){const e=y[t];Math.hypot(c.x-e.x,c.y-e.y)-c.size/2-e.size/2<1&&(e.type==="shield"&&(x=!0),y.splice(t,1))}}async function P(){c.y=l.height/2,c.velocity_y=0,c.gravity=0,await F(dt),G(l,g),A=!1,C=!0}function gt(){T.value=0,j=4,x=!1,y.length=0,I.length=0,z="playing",Z(),P()}function wt(){rt(),ot(),at(c.x,c.y),z="gameOver"}function _(){if(a.clearRect(0,0,l.width,l.height),a.drawImage(b.background,0,0,l.width,l.height),z==="playing"){if(c.update(),c.draw(a,b.character),h.forEach(t=>{t.update(j),t.draw(a,b.obstacle)}),L.forEach(t=>{t.update(j),t.draw(a)}),$(j),Q(a),ft(),!A){const t=J(c,l);t&&(A=!0,t==="correct"?(st(),T.value++,D("Helyes!",60,"green"),Math.random()<.25&&X(l),setTimeout(P,500)):t==="incorrect"?(D("Rossz!",60,"red"),setTimeout(P,500)):["wall","ceiling","floor"].includes(t)&&(x?(x=!1,h.forEach(e=>e.x+=150),L.forEach(e=>e.x+=150),A=!1):wt()))}h.length>0&&h[0].x<-h[0].width&&(D("Rossz!",60,"red"),P()),g.display&&tt(a,g,l),K(a,T),x&&it(a),M.ttl>0&&(et(a,l,M.text,M.color),M.ttl--)}else z==="gameOver"&&V(a,l,T);ct(),ut(a),requestAnimationFrame(_)}document.addEventListener("keydown",t=>{t.code==="Space"&&z==="playing"&&(C&&(c.gravity=.5,C=!1),c.jump(),nt())});l.addEventListener("click",function(t){if(z==="gameOver"){const e=l.getBoundingClientRect(),i=t.clientX-e.left,n=t.clientY-e.top,s=l.width/2-100,o=l.height/2+20;i>=s&&i<=s+200&&n>=o&&n<=o+50&&gt()}});async function yt(){O(l),window.addEventListener("resize",()=>O(l)),a.fillStyle="black",a.font="20px 'Press Start 2P'",a.textAlign="center",a.fillText("Loading assets...",l.width/2,l.height/2),b=await ht(),Z(),await P(),_()}yt();
//# sourceMappingURL=index-Dx0m2P2g.js.map
